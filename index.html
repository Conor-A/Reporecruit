<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RepoRecruit ‚Äî Web3 Talent Sourcing</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #080a0f; --surface: #0e1117; --surface2: #151921; --surface3: #1c2230;
  --border: #1a2035; --border2: #243050;
  --accent: #00e5a0; --accent2: #3d7fff; --accent3: #f59e0b;
  --warn: #ff6b35; --purple: #a78bfa; --pink: #f472b6;
  --text: #e2e8f4; --text2: #7a8ba8; --text3: #3d4f6b;
  --sol: #627eea; --btc: #f7931a; --solana: #9945ff; --rust: #ce422b; --cosmos: #2e3148;
}
html, body, #root { height: 100%; }
body { background: var(--bg); color: var(--text); font-family: 'JetBrains Mono', monospace; overflow-x: hidden; }

/* Animated bg */
.bg-canvas { position: fixed; inset: 0; z-index: 0; overflow: hidden; pointer-events: none; }
.bg-canvas::before {
  content: ''; position: absolute; inset: 0;
  background-image: linear-gradient(rgba(0,229,160,0.025) 1px, transparent 1px), linear-gradient(90deg, rgba(0,229,160,0.025) 1px, transparent 1px);
  background-size: 48px 48px;
}
.bg-orb { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.12; animation: drift 20s ease-in-out infinite; }
.bg-orb-1 { width: 500px; height: 500px; background: var(--accent); top: -100px; right: -100px; animation-delay: 0s; }
.bg-orb-2 { width: 400px; height: 400px; background: var(--accent2); bottom: -100px; left: -100px; animation-delay: -10s; }
@keyframes drift { 0%,100%{transform:translate(0,0)} 50%{transform:translate(30px,20px)} }

.wrap { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 0 28px; }

/* Header */
header { border-bottom: 1px solid var(--border); padding: 14px 0; position: sticky; top: 0; background: rgba(8,10,15,0.94); backdrop-filter: blur(16px); z-index: 200; }
.header-inner { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
.logo { display: flex; align-items: center; gap: 10px; }
.logo-hex { width: 32px; height: 32px; background: var(--accent); clip-path: polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%); display: flex; align-items: center; justify-content: center; }
.logo-mark { font-family: 'DM Serif Display', serif; font-size: 20px; color: var(--text); }
.logo-mark span { color: var(--accent); }
.logo-tag { font-size: 9px; color: var(--text3); letter-spacing: 2.5px; text-transform: uppercase; }
.header-right { display: flex; align-items: center; gap: 12px; }
.saved-btn { display: flex; align-items: center; gap: 6px; background: var(--surface); border: 1px solid var(--border2); border-radius: 6px; color: var(--text2); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 11px; padding: 7px 14px; transition: all 0.2s; }
.saved-btn:hover { border-color: var(--accent3); color: var(--accent3); }
.saved-count { background: var(--accent3); color: #000; border-radius: 10px; font-size: 10px; font-weight: 700; padding: 1px 6px; }
.status-pill { display: flex; align-items: center; gap: 6px; font-size: 10px; color: var(--text2); background: var(--surface); border: 1px solid var(--border); padding: 5px 12px; border-radius: 20px; }
.dot { width: 5px; height: 5px; border-radius: 50%; background: var(--accent); animation: pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(0,229,160,0.4)} 50%{opacity:0.5;box-shadow:0 0 0 4px rgba(0,229,160,0)} }

/* Hero */
.hero { padding: 56px 0 40px; text-align: center; }
.eyebrow { display: inline-flex; align-items: center; gap: 8px; font-size: 10px; letter-spacing: 3px; text-transform: uppercase; color: var(--accent); margin-bottom: 20px; border: 1px solid rgba(0,229,160,0.2); padding: 5px 14px; border-radius: 20px; background: rgba(0,229,160,0.05); }
.hero-title { font-family: 'DM Serif Display', serif; font-size: clamp(34px,5vw,58px); line-height: 1.05; margin-bottom: 16px; }
.hero-title em { font-style: italic; color: var(--accent); }
.hero-title .dim { color: var(--text2); }
.hero-sub { font-size: 13px; color: var(--text2); line-height: 1.8; max-width: 520px; margin: 0 auto 40px; }

/* Mode Toggle */
.mode-toggle { display: flex; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 4px; max-width: 400px; margin: 0 auto 32px; }
.mode-btn { flex: 1; background: transparent; border: none; border-radius: 5px; color: var(--text2); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 11px; letter-spacing: 1px; padding: 9px 16px; text-transform: uppercase; transition: all 0.2s; }
.mode-btn.active { background: var(--surface3); color: var(--text); border: 1px solid var(--border2); }

/* Search Cards */
.search-card { background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; padding: 28px; max-width: 760px; margin: 0 auto 40px; position: relative; overflow: hidden; }
.search-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, var(--accent), var(--accent2)); }
.field-label { font-size: 9px; letter-spacing: 2.5px; text-transform: uppercase; color: var(--text3); margin-bottom: 8px; }
.input-row { display: flex; gap: 10px; }
.repo-input, .token-input, .ai-input {
  flex: 1; background: var(--bg); border: 1px solid var(--border2); border-radius: 5px;
  color: var(--text); font-family: 'JetBrains Mono', monospace; font-size: 13px;
  padding: 12px 16px; outline: none; transition: all 0.2s; width: 100%;
}
.repo-input:focus, .token-input:focus, .ai-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,229,160,0.08); }
.repo-input::placeholder, .token-input::placeholder, .ai-input::placeholder { color: var(--text3); }
.ai-input { font-size: 13px; resize: none; }

.search-btn {
  background: var(--accent); border: none; border-radius: 5px; color: #050709; cursor: pointer;
  font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 700;
  letter-spacing: 1.5px; padding: 12px 24px; text-transform: uppercase; transition: all 0.2s; white-space: nowrap;
}
.search-btn:hover:not(:disabled) { background: #00ffb3; box-shadow: 0 0 20px rgba(0,229,160,0.3); transform: translateY(-1px); }
.search-btn:disabled { opacity: 0.35; cursor: not-allowed; transform: none; box-shadow: none; }

.ai-btn {
  background: linear-gradient(135deg, var(--accent2), var(--purple)); border: none; border-radius: 5px; color: #fff; cursor: pointer;
  font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 700;
  letter-spacing: 1px; padding: 12px 24px; text-transform: uppercase; transition: all 0.2s; white-space: nowrap;
}
.ai-btn:hover { opacity: 0.85; transform: translateY(-1px); }

.hint { margin-top: 10px; font-size: 11px; color: var(--text3); }
.hint span { color: var(--text2); }
.token-row { margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border); }
.token-note { margin-top: 6px; font-size: 10px; color: var(--text3); line-height: 1.7; }
.token-note a { color: var(--accent2); }

/* AI Suggestions */
.ai-suggestions { margin-top: 20px; }
.ai-suggestions-title { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); margin-bottom: 12px; }
.suggestion-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 10px; }
.suggestion-card {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 6px;
  padding: 12px 14px; cursor: pointer; transition: all 0.2s;
}
.suggestion-card:hover { border-color: var(--accent2); background: var(--surface3); transform: translateY(-1px); }
.suggestion-repo { font-size: 12px; color: var(--accent2); margin-bottom: 4px; }
.suggestion-reason { font-size: 10px; color: var(--text3); line-height: 1.5; }
.suggestion-tags { display: flex; gap: 5px; margin-top: 8px; flex-wrap: wrap; }

/* Role presets */
.role-presets { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 16px; }
.preset-btn { background: var(--surface2); border: 1px solid var(--border); border-radius: 20px; color: var(--text2); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 10px; padding: 5px 12px; transition: all 0.2s; }
.preset-btn:hover { border-color: var(--accent2); color: var(--accent2); }

/* Error */
.error-box { background: rgba(255,107,53,0.07); border: 1px solid rgba(255,107,53,0.25); border-radius: 6px; padding: 14px 18px; font-size: 12px; color: var(--warn); margin-bottom: 20px; max-width: 760px; margin-left: auto; margin-right: auto; }

/* Loader */
.loader { text-align: center; padding: 64px 0; }
.loader-bar { width: 240px; height: 2px; background: var(--border2); border-radius: 2px; margin: 0 auto 20px; overflow: hidden; position: relative; }
.loader-fill { position: absolute; top: 0; left: 0; width: 80px; height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); animation: slide 1.2s ease-in-out infinite; }
@keyframes slide { 0%{transform:translateX(-80px)} 100%{transform:translateX(240px)} }
.loader-text { font-size: 12px; color: var(--text2); margin-bottom: 6px; }
.loader-sub { font-size: 10px; color: var(--text3); }

/* Repo Banner */
.repo-banner { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; background: var(--surface); border: 1px solid var(--border2); border-radius: 8px; padding: 16px 20px; margin-bottom: 20px; }
.repo-title { font-family: 'DM Serif Display', serif; font-size: 20px; }
.repo-stat { display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--text2); }
.repo-desc { font-size: 11px; color: var(--text3); max-width: 400px; margin-top: 3px; }

/* Stats */
.stats-bar { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; margin-bottom: 24px; }
.stat { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px; transition: border-color 0.2s; }
.stat:hover { border-color: var(--border2); }
.stat-num { font-family: 'DM Serif Display', serif; font-size: 28px; line-height: 1; margin-bottom: 4px; }
.stat-label { font-size: 9px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--text3); }

/* Results controls */
.results-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; flex-wrap: wrap; gap: 10px; }
.results-meta { display: flex; align-items: center; gap: 10px; }
.results-title { font-family: 'DM Serif Display', serif; font-size: 22px; }
.count-pill { background: var(--surface2); border: 1px solid var(--border2); border-radius: 20px; font-size: 10px; color: var(--accent); padding: 3px 10px; }
.btn-group { display: flex; gap: 8px; flex-wrap: wrap; }
.outline-btn { background: transparent; border: 1px solid var(--border2); border-radius: 5px; color: var(--text2); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 1px; padding: 7px 14px; text-transform: uppercase; transition: all 0.2s; }
.outline-btn:hover { border-color: var(--accent); color: var(--accent); }

/* Filters */
.filter-bar { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; align-items: center; }
.filter-btn { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; color: var(--text2); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 10px; padding: 5px 14px; transition: all 0.2s; }
.filter-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(0,229,160,0.06); }
.filter-sep { width: 1px; height: 20px; background: var(--border); margin: 0 4px; }
.search-filter { background: var(--surface); border: 1px solid var(--border); border-radius: 5px; color: var(--text); font-family: 'JetBrains Mono', monospace; font-size: 11px; padding: 5px 12px; outline: none; width: 200px; }
.search-filter:focus { border-color: var(--accent2); }
.search-filter::placeholder { color: var(--text3); }

/* Table */
.table-wrap { overflow-x: auto; border: 1px solid var(--border); border-radius: 10px; margin-bottom: 60px; }
table { width: 100%; border-collapse: collapse; font-size: 12px; }
thead { background: var(--surface2); border-bottom: 1px solid var(--border2); }
th { text-align: left; padding: 11px 14px; font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); white-space: nowrap; }
tbody tr { border-bottom: 1px solid var(--border); transition: background 0.12s; }
tbody tr:last-child { border-bottom: none; }
tbody tr:hover { background: rgba(255,255,255,0.02); }
td { padding: 13px 14px; vertical-align: middle; }

.avatar-cell { display: flex; align-items: center; gap: 10px; min-width: 160px; }
.avatar { width: 36px; height: 36px; border-radius: 50%; border: 1px solid var(--border2); object-fit: cover; flex-shrink: 0; cursor: pointer; transition: transform 0.2s; }
.avatar:hover { transform: scale(1.1); }
.name-text { font-weight: 500; font-size: 12px; cursor: pointer; }
.name-text:hover { color: var(--accent); }
.sub-text { font-size: 10px; color: var(--text3); margin-top: 2px; }

.handle-link { color: var(--accent2); text-decoration: none; font-size: 12px; }
.handle-link:hover { opacity: 0.7; }
.email-link { color: var(--accent); text-decoration: none; font-size: 11px; }
.email-link:hover { opacity: 0.7; }
.no-val { color: var(--text3); font-size: 11px; }

.commits-badge { background: var(--surface2); border: 1px solid var(--border); border-radius: 4px; color: var(--text2); font-size: 11px; padding: 3px 8px; }

/* Protocol badges */
.badge-cell { display: flex; flex-wrap: wrap; gap: 4px; min-width: 100px; }
.badge { border-radius: 4px; font-size: 9px; font-weight: 700; letter-spacing: 0.5px; padding: 3px 7px; text-transform: uppercase; white-space: nowrap; }
.badge-eth { background: rgba(98,126,234,0.15); border: 1px solid rgba(98,126,234,0.3); color: #8fa8f5; }
.badge-sol { background: rgba(153,69,255,0.15); border: 1px solid rgba(153,69,255,0.3); color: #c084fc; }
.badge-rust { background: rgba(206,66,43,0.15); border: 1px solid rgba(206,66,43,0.3); color: #f87171; }
.badge-cosmos { background: rgba(100,149,237,0.15); border: 1px solid rgba(100,149,237,0.3); color: #93c5fd; }
.badge-btc { background: rgba(247,147,26,0.15); border: 1px solid rgba(247,147,26,0.3); color: #fbbf24; }
.badge-near { background: rgba(0,236,151,0.15); border: 1px solid rgba(0,236,151,0.3); color: #34d399; }
.badge-polka { background: rgba(230,0,122,0.15); border: 1px solid rgba(230,0,122,0.3); color: #f472b6; }
.badge-avax { background: rgba(232,65,66,0.15); border: 1px solid rgba(232,65,66,0.3); color: #fca5a5; }
.badge-lang { background: rgba(167,139,250,0.12); border: 1px solid rgba(167,139,250,0.25); color: #a78bfa; }
.badge-defi { background: rgba(0,229,160,0.12); border: 1px solid rgba(0,229,160,0.25); color: var(--accent); }

/* Activity score */
.score-cell { min-width: 80px; }
.score-bar-wrap { display: flex; align-items: center; gap: 8px; }
.score-num { font-family: 'DM Serif Display', serif; font-size: 18px; min-width: 28px; }
.score-bar { flex: 1; height: 3px; background: var(--border2); border-radius: 2px; overflow: hidden; min-width: 40px; }
.score-fill { height: 100%; border-radius: 2px; transition: width 0.6s ease; }
.score-label { font-size: 9px; color: var(--text3); margin-top: 2px; letter-spacing: 1px; text-transform: uppercase; }

/* Activity indicator */
.activity-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 6px; }
.activity-hot { background: var(--accent); box-shadow: 0 0 6px rgba(0,229,160,0.5); }
.activity-warm { background: var(--accent3); }
.activity-cold { background: var(--text3); }
.activity-text { font-size: 10px; }

/* LinkedIn btn */
.li-btn { display: inline-flex; align-items: center; gap: 5px; background: rgba(61,127,255,0.08); border: 1px solid rgba(61,127,255,0.2); border-radius: 4px; color: var(--accent2); font-family: 'JetBrains Mono', monospace; font-size: 9px; padding: 4px 10px; text-decoration: none; transition: all 0.2s; letter-spacing: 0.5px; }
.li-btn:hover { background: rgba(61,127,255,0.18); }

/* Save btn */
.save-btn { background: transparent; border: 1px solid var(--border); border-radius: 4px; color: var(--text3); cursor: pointer; font-size: 14px; padding: 4px 8px; transition: all 0.2s; line-height: 1; }
.save-btn:hover { border-color: var(--accent3); color: var(--accent3); }
.save-btn.saved { border-color: var(--accent3); color: var(--accent3); background: rgba(245,158,11,0.1); }

/* Modal / Drawer */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 300; backdrop-filter: blur(4px); display: flex; align-items: flex-end; justify-content: center; animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.drawer { background: var(--surface); border: 1px solid var(--border2); border-radius: 16px 16px 0 0; width: 100%; max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 28px; animation: slideUp 0.3s ease; }
@keyframes slideUp { from{transform:translateY(40px);opacity:0} to{transform:translateY(0);opacity:1} }
.drawer-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
.drawer-title { font-family: 'DM Serif Display', serif; font-size: 22px; }
.close-btn { background: var(--surface2); border: 1px solid var(--border); border-radius: 6px; color: var(--text2); cursor: pointer; font-size: 18px; padding: 4px 10px; transition: all 0.2s; }
.close-btn:hover { border-color: var(--warn); color: var(--warn); }

/* Profile drawer */
.profile-top { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 24px; }
.profile-avatar { width: 72px; height: 72px; border-radius: 50%; border: 2px solid var(--border2); }
.profile-name { font-family: 'DM Serif Display', serif; font-size: 26px; margin-bottom: 4px; }
.profile-handle { color: var(--accent2); font-size: 13px; margin-bottom: 8px; }
.profile-bio { font-size: 12px; color: var(--text2); line-height: 1.6; max-width: 400px; }
.profile-meta { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 10px; }
.profile-meta-item { font-size: 11px; color: var(--text3); display: flex; align-items: center; gap: 5px; }

.profile-section { margin-bottom: 22px; }
.profile-section-title { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); margin-bottom: 12px; border-bottom: 1px solid var(--border); padding-bottom: 8px; }

.repo-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
.repo-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 6px; padding: 12px; transition: all 0.2s; text-decoration: none; display: block; }
.repo-card:hover { border-color: var(--accent2); }
.repo-card-name { color: var(--accent2); font-size: 12px; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.repo-card-desc { font-size: 10px; color: var(--text3); line-height: 1.5; height: 30px; overflow: hidden; }
.repo-card-meta { display: flex; gap: 10px; margin-top: 8px; font-size: 10px; color: var(--text3); }

.note-area { width: 100%; background: var(--bg); border: 1px solid var(--border2); border-radius: 5px; color: var(--text); font-family: 'JetBrains Mono', monospace; font-size: 12px; padding: 12px; outline: none; resize: vertical; min-height: 80px; transition: border-color 0.2s; }
.note-area:focus { border-color: var(--accent2); }
.note-area::placeholder { color: var(--text3); }
.save-note-btn { margin-top: 8px; background: var(--accent2); border: none; border-radius: 5px; color: #fff; cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 10px; font-weight: 700; letter-spacing: 1px; padding: 8px 18px; text-transform: uppercase; transition: all 0.2s; }
.save-note-btn:hover { opacity: 0.85; }

/* Saved panel */
.saved-panel { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px; }
.saved-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 8px; padding: 14px; display: flex; gap: 12px; align-items: flex-start; }
.saved-card-info { flex: 1; }
.saved-card-name { font-weight: 500; font-size: 13px; margin-bottom: 3px; }
.saved-card-handle { color: var(--accent2); font-size: 11px; margin-bottom: 6px; }
.saved-card-note { font-size: 10px; color: var(--text3); line-height: 1.5; }
.unsave-btn { background: transparent; border: none; color: var(--text3); cursor: pointer; font-size: 16px; padding: 0; transition: color 0.2s; }
.unsave-btn:hover { color: var(--warn); }

/* Tag pills in filter */
.lang-filter-wrap { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 10px; }
.lang-filter-btn { background: var(--surface2); border: 1px solid var(--border); border-radius: 4px; color: var(--text3); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 0.5px; padding: 4px 10px; text-transform: uppercase; transition: all 0.2s; }
.lang-filter-btn.active { border-color: var(--purple); color: var(--purple); background: rgba(167,139,250,0.1); }

footer { border-top: 1px solid var(--border); padding: 24px 0; text-align: center; font-size: 10px; color: var(--text3); line-height: 2; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useCallback, useEffect, useRef } = React;

// ‚îÄ‚îÄ Web3 Knowledge Base ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const WEB3_KB = {
  roles: {
    "solidity developer": {
      repos: ["OpenZeppelin/openzeppelin-contracts","Uniswap/v3-core","aave/aave-protocol","compound-finance/compound-protocol","curvefi/curve-contract","morpho-org/morpho-blue"],
      reason: "Core Solidity smart contract repos used by top DeFi protocols",
      tags: ["Solidity","DeFi","EVM"]
    },
    "rust blockchain engineer": {
      repos: ["solana-labs/solana","paritytech/substrate","near/nearcore","aptos-labs/aptos-core","MystenLabs/sui"],
      reason: "Leading Rust-based L1 and L2 blockchain infrastructure projects",
      tags: ["Rust","L1","Infrastructure"]
    },
    "defi protocol developer": {
      repos: ["Uniswap/v3-core","aave/aave-v3-core","makerdao/dss","balancer-labs/balancer-v2-monorepo","yearn/yearn-vaults","liquity/dev"],
      reason: "The most forked and referenced DeFi protocol implementations",
      tags: ["Solidity","DeFi","AMM"]
    },
    "layer 2 engineer": {
      repos: ["ethereum-optimism/optimism","OffchainLabs/arbitrum","0xPolygon/polygon-edge","matter-labs/zksync","starkware-libs/cairo-lang"],
      reason: "Core L2 scaling solution repos across optimistic and zk rollup stacks",
      tags: ["L2","Rollups","zkEVM"]
    },
    "zk / zero knowledge engineer": {
      repos: ["matter-labs/zksync","starkware-libs/cairo-lang","zcash/librustzcash","arkworks-rs/arkworks-rs","privacy-scaling-explorations/maci","succinctlabs/sp1"],
      reason: "Leading ZK proof systems, circuits, and zkVM projects",
      tags: ["ZK","Cairo","Circom","Rust"]
    },
    "ethereum core developer": {
      repos: ["ethereum/go-ethereum","ethereum/consensus-specs","ethereum/py-evm","sigp/lighthouse","prysmaticlabs/prysm"],
      reason: "Core Ethereum client and consensus layer implementations",
      tags: ["Go","Python","Ethereum","EVM"]
    },
    "nft / token developer": {
      repos: ["OpenZeppelin/openzeppelin-contracts","chiru-labs/ERC721A","thirdweb-dev/contracts","manifoldxyz/creator-core-solidity","transmissions11/solmate"],
      reason: "ERC-721, ERC-1155 and token standard implementations",
      tags: ["Solidity","NFT","ERC-721"]
    },
    "cross-chain / bridge developer": {
      repos: ["axelarnetwork/axelar-core","LayerZero-Labs/LayerZero","wormhole-foundation/wormhole","connext/monorepo","hop-protocol/hop-contracts"],
      reason: "Top cross-chain messaging and bridge protocol codebases",
      tags: ["Cross-chain","Interop","Bridges"]
    },
    "web3 frontend developer": {
      repos: ["wagmi-dev/wagmi","rainbow-me/rainbowkit","WalletConnect/walletconnect-monorepo","ethers-io/ethers.js","wevm/viem","scaffold-eth/scaffold-eth-2"],
      reason: "Leading web3 frontend libraries and wallet connection tooling",
      tags: ["TypeScript","React","wagmi","ethers.js"]
    },
    "cosmos / ibc developer": {
      repos: ["cosmos/cosmos-sdk","cosmos/ibc-go","osmosis-labs/osmosis","ignite/cli","celestiaorg/celestia-core"],
      reason: "Core Cosmos SDK and IBC protocol implementations",
      tags: ["Go","Cosmos","IBC"]
    },
    "security researcher / auditor": {
      repos: ["crytic/slither","trailofbits/manticore","OpenZeppelin/openzeppelin-contracts","consensys/mythril","foundry-rs/foundry"],
      reason: "Smart contract security tooling and audited reference implementations",
      tags: ["Security","Auditing","Solidity"]
    },
    "move developer": {
      repos: ["aptos-labs/aptos-core","MystenLabs/sui","move-language/move","starcoinorg/starcoin"],
      reason: "Move language blockchain ecosystems",
      tags: ["Move","Aptos","Sui"]
    }
  }
};

// Protocol detection based on repo names / languages
const PROTOCOL_MAP = {
  eth: { label: "ETH", cls: "badge-eth", keywords: ["ethereum","solidity","evm","uniswap","aave","compound","openzeppelin","hardhat","foundry","wagmi","ethers","viem","geth"] },
  sol: { label: "SOL", cls: "badge-sol", keywords: ["solana","anchor","spl-token","solana-labs"] },
  rust: { label: "Rust", cls: "badge-rust", keywords: ["rust","cargo","substrate","polkadot","parity","near","solana-labs","aptos","sui","mysten"] },
  cosmos: { label: "Cosmos", cls: "badge-cosmos", keywords: ["cosmos","ibc","tendermint","osmosis","celestia","ignite"] },
  btc: { label: "BTC", cls: "badge-btc", keywords: ["bitcoin","lightning","taproot","ordinals","btc","libbitcoin"] },
  near: { label: "NEAR", cls: "badge-near", keywords: ["near","nearcore","aurora-is-near"] },
  polka: { label: "DOT", cls: "badge-polka", keywords: ["polkadot","substrate","parity","kusama","ink"] },
  avax: { label: "AVAX", cls: "badge-avax", keywords: ["avalanche","avax","ava-labs"] },
};

const LANG_MAP = {
  solidity: { label: "Solidity", cls: "badge-lang" },
  rust: { label: "Rust", cls: "badge-lang" },
  move: { label: "Move", cls: "badge-lang" },
  vyper: { label: "Vyper", cls: "badge-lang" },
  cairo: { label: "Cairo", cls: "badge-lang" },
  go: { label: "Go", cls: "badge-lang" },
  circom: { label: "Circom", cls: "badge-lang" },
};

function detectBadges(repos) {
  if (!repos || !repos.length) return [];
  const badges = new Set();
  const allText = repos.map(r => `${(r.name||'')} ${(r.description||'')} ${(r.language||'')} ${(r.topics||[]).join(' ')}`).join(' ').toLowerCase();

  Object.entries(PROTOCOL_MAP).forEach(([key, { label, cls, keywords }]) => {
    if (keywords.some(kw => allText.includes(kw))) badges.add({ label, cls, key });
  });

  const langs = repos.map(r => (r.language||'').toLowerCase()).filter(Boolean);
  Object.entries(LANG_MAP).forEach(([key, { label, cls }]) => {
    if (langs.includes(key) || allText.includes(key)) badges.add({ label, cls, key: 'lang-'+key });
  });

  // DeFi detection
  if (['defi','dex','amm','lending','vault','yield','liquidity','protocol'].some(w => allText.includes(w))) {
    badges.add({ label: "DeFi", cls: "badge-defi", key: "defi" });
  }

  return [...badges];
}

function calcActivityScore(c) {
  const now = Date.now();
  const lastActive = c.lastActive ? new Date(c.lastActive).getTime() : null;
  const daysSince = lastActive ? (now - lastActive) / 86400000 : 365;
  const recencyScore = daysSince < 30 ? 40 : daysSince < 90 ? 25 : daysSince < 180 ? 10 : 0;
  const commitScore = Math.min(40, Math.floor(Math.log2(c.contributions + 1) * 6));
  const repoScore = Math.min(20, (c.publicRepos || 0));
  return Math.min(99, recencyScore + commitScore + repoScore);
}

function activityLabel(c) {
  const days = c.daysSinceActive;
  if (!days || days < 30) return { cls: 'activity-hot', text: 'Active now' };
  if (days < 90) return { cls: 'activity-warm', text: `${Math.round(days)}d ago` };
  return { cls: 'activity-cold', text: `${Math.round(days)}d ago` };
}

function liSearch(c) {
  const name = c.name && c.name !== c.login ? c.name : c.login;
  return `https://www.google.com/search?q=${encodeURIComponent('"' + name + '" site:linkedin.com/in')}`;
}

function download(filename, content, type) {
  const a = document.createElement('a');
  a.href = URL.createObjectURL(new Blob([content], { type }));
  a.download = filename; a.click();
}

function scoreColor(s) {
  if (s >= 70) return 'var(--accent)';
  if (s >= 40) return 'var(--accent3)';
  return 'var(--text3)';
}

// ‚îÄ‚îÄ Main App ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function App() {
  const [mode, setMode] = useState('repo'); // 'repo' | 'ai'
  const [repoInput, setRepoInput] = useState('');
  const [tokenInput, setTokenInput] = useState('');
  const [aiQuery, setAiQuery] = useState('');
  const [aiSuggestions, setAiSuggestions] = useState([]);
  const [loading, setLoading] = useState(false);
  const [loadingText, setLoadingText] = useState('');
  const [loadingSubtext, setLoadingSubtext] = useState('');
  const [error, setError] = useState('');
  const [contributors, setContributors] = useState([]);
  const [repoInfo, setRepoInfo] = useState(null);
  const [filter, setFilter] = useState('all');
  const [langFilter, setLangFilter] = useState('all');
  const [textFilter, setTextFilter] = useState('');
  const [saved, setSaved] = useState(() => { try { return JSON.parse(localStorage.getItem('rr_saved')||'{}'); } catch{return {};} });
  const [notes, setNotes] = useState(() => { try { return JSON.parse(localStorage.getItem('rr_notes')||'{}'); } catch{return {};} });
  const [showSaved, setShowSaved] = useState(false);
  const [profileOpen, setProfileOpen] = useState(null);
  const [profileData, setProfileData] = useState({});
  const [noteText, setNoteText] = useState('');

  useEffect(() => { localStorage.setItem('rr_saved', JSON.stringify(saved)); }, [saved]);
  useEffect(() => { localStorage.setItem('rr_notes', JSON.stringify(notes)); }, [notes]);

  const headers = useCallback(() => {
    const h = { 'Accept': 'application/vnd.github.v3+json' };
    if (tokenInput.trim()) h['Authorization'] = 'Bearer ' + tokenInput.trim();
    return h;
  }, [tokenInput]);

  // AI Search
  const handleAISearch = () => {
    const q = aiQuery.toLowerCase().trim();
    if (!q) return;
    const results = [];
    const scored = Object.entries(WEB3_KB.roles).map(([role, data]) => {
      const roleWords = role.split(' ');
      const score = roleWords.filter(w => q.includes(w)).length + (q.includes(role) ? 5 : 0);
      const queryWords = q.split(' ').filter(w => w.length > 3);
      const tagScore = data.tags.filter(t => queryWords.some(w => t.toLowerCase().includes(w))).length;
      return { role, data, score: score + tagScore };
    }).filter(x => x.score > 0).sort((a,b) => b.score - a.score);

    if (scored.length === 0) {
      // fallback: show all
      Object.entries(WEB3_KB.roles).slice(0,4).forEach(([role,data]) => {
        data.repos.slice(0,2).forEach(repo => results.push({ repo, reason: data.reason, tags: data.tags, role }));
      });
    } else {
      scored.slice(0,3).forEach(({ role, data }) => {
        data.repos.slice(0,3).forEach(repo => results.push({ repo, reason: data.reason, tags: data.tags, role }));
      });
    }
    setAiSuggestions(results);
  };

  const handlePreset = (roleKey) => {
    const data = WEB3_KB.roles[roleKey];
    if (!data) return;
    setAiQuery(roleKey);
    const results = data.repos.map(repo => ({ repo, reason: data.reason, tags: data.tags, role: roleKey }));
    setAiSuggestions(results);
  };

  const fetchRepo = useCallback(async (repoStr) => {
    setError(''); setContributors([]); setRepoInfo(null); setAiSuggestions([]);
    const input = (repoStr || repoInput).trim();
    if (!input.includes('/')) { setError('Please enter a valid repo as owner/repository ‚Äî e.g. vercel/next.js'); return; }
    const [owner, repo] = input.split('/').map(s => s.trim());
    if (!owner || !repo) { setError('Please enter a valid repo format: owner/repository'); return; }
    const h = headers();
    setLoading(true);
    try {
      setLoadingText('Fetching repository info...'); setLoadingSubtext('');
      const repoRes = await fetch('https://api.github.com/repos/' + owner + '/' + repo, { headers: h });
      if (!repoRes.ok) {
        const err = await repoRes.json().catch(()=>({}));
        throw new Error(repoRes.status===404 ? `Repository "${owner}/${repo}" not found. Check spelling.` : repoRes.status===403 ? 'Rate limit hit ‚Äî add a GitHub token to continue.' : repoRes.status===401 ? 'Invalid token.' : err.message || `GitHub error (${repoRes.status})`);
      }
      const repoData = await repoRes.json();
      setRepoInfo(repoData);

      setLoadingText('Fetching contributors...'); setLoadingSubtext('Paginating through commit history');
      let all = [];
      for (let page = 1; page <= 5; page++) {
        const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contributors?per_page=100&page=${page}&anon=false`, { headers: h });
        if (!res.ok) { const e = await res.json().catch(()=>({})); throw new Error(e.message||'Failed to fetch contributors'); }
        const data = await res.json();
        if (!Array.isArray(data)||data.length===0) break;
        all = all.concat(data);
        if (data.length < 100) break;
      }
      if (all.length===0) throw new Error('No contributors found.');

      setLoadingText(`Enriching ${all.length} profiles...`); setLoadingSubtext('Fetching languages, activity & web3 signals');
      const enriched = [];
      for (let i = 0; i < all.length; i += 6) {
        const batch = all.slice(i, i+6);
        const results = await Promise.all(batch.map(async (c) => {
          try {
            const [pr, rr] = await Promise.all([
              fetch('https://api.github.com/users/' + c.login, { headers: h }),
              fetch('https://api.github.com/users/' + c.login + '/repos?per_page=30&sort=updated', { headers: h })
            ]);
            const p = pr.ok ? await pr.json() : {};
            const repos = rr.ok ? await rr.json() : [];
            const lastPushed = repos.length ? repos[0].pushed_at : null;
            const daysSince = lastPushed ? (Date.now()-new Date(lastPushed).getTime())/86400000 : null;
            const badges = detectBadges(Array.isArray(repos) ? repos : []);
            return {
              login: c.login, avatar_url: c.avatar_url, html_url: c.html_url,
              contributions: c.contributions,
              name: p.name||c.login, email: p.email||null,
              location: p.location||null, company: p.company||null, bio: p.bio||null,
              publicRepos: p.public_repos||0,
              lastActive: lastPushed,
              daysSinceActive: daysSince,
              badges,
              repos: Array.isArray(repos) ? repos : [],
            };
          } catch { return { ...c, name: c.login, email: null, location: null, company: null, badges: [], repos: [], daysSinceActive: null }; }
        }));
        enriched.push(...results);
        setLoadingText(`Enriched ${Math.min(i+6, all.length)} / ${all.length} profiles...`);
      }
      setContributors(enriched);
    } catch(e) { setError(e.message); }
    finally { setLoading(false); }
  }, [repoInput, headers]);

  // Filtering
  const filtered = contributors.filter(c => {
    if (filter==='email' && !c.email) return false;
    if (filter==='active' && (!c.daysSinceActive || c.daysSinceActive > 90)) return false;
    if (filter==='saved' && !saved[c.login]) return false;
    if (langFilter !== 'all') {
      const hasLang = c.badges.some(b => b.key === 'lang-'+langFilter || b.key === langFilter);
      if (!hasLang) return false;
    }
    if (textFilter) {
      const q = textFilter.toLowerCase();
      if (!((c.name||'').toLowerCase().includes(q) || c.login.toLowerCase().includes(q) || (c.location||'').toLowerCase().includes(q) || (c.bio||'').toLowerCase().includes(q) || (c.company||'').toLowerCase().includes(q))) return false;
    }
    return true;
  });

  const withEmail = contributors.filter(c=>c.email).length;
  const withLocation = contributors.filter(c=>c.location).length;
  const activeDevs = contributors.filter(c=>c.daysSinceActive && c.daysSinceActive < 90).length;
  const web3Devs = contributors.filter(c=>c.badges && c.badges.length > 0).length;
  const savedCount = Object.keys(saved).length;

  // Detect available lang filters
  const allLangs = [...new Set(contributors.flatMap(c => c.badges.filter(b=>b.key.startsWith('lang-')).map(b=>b.key.replace('lang-',''))))];

  const openProfile = async (c) => {
    setProfileOpen(c);
    setNoteText(notes[c.login]||'');
    if (!profileData[c.login]) {
      try {
        const h = headers();
        const res = await fetch('https://api.github.com/users/'+c.login+'/repos?per_page=6&sort=stars', { headers: h });
        const repos = res.ok ? await res.json() : [];
        setProfileData(prev => ({ ...prev, [c.login]: { repos } }));
      } catch {}
    }
  };

  const saveNote = () => {
    if (!profileOpen) return;
    setNotes(prev => ({ ...prev, [profileOpen.login]: noteText }));
  };

  const toggleSave = (c) => {
    setSaved(prev => {
      const next = { ...prev };
      if (next[c.login]) delete next[c.login]; else next[c.login] = { login: c.login, name: c.name, avatar_url: c.avatar_url, html_url: c.html_url };
      return next;
    });
  };

  const exportCSV = () => {
    const rows = [['Name','Handle','GitHub URL','Email','Location','Company','Commits','Activity','Web3 Badges','Score','LinkedIn'],
      ...filtered.map(c=>[c.name||c.login,'@'+c.login,c.html_url,c.email||'',c.location||'',c.company||'',c.contributions,c.daysSinceActive?Math.round(c.daysSinceActive)+'d ago':'unknown',c.badges.map(b=>b.label).join(', '),calcActivityScore(c),liSearch(c)]).map(r=>r.map(v=>'"'+String(v).replace(/"/g,'""')+'"').join(','))];
    download('repocruit-web3-export.csv', rows.join('\n'), 'text/csv');
  };

  return (
    <div style={{minHeight:'100vh',background:'var(--bg)'}}>
      <div className="bg-canvas"><div className="bg-orb bg-orb-1"/><div className="bg-orb bg-orb-2"/></div>

      <header>
        <div className="wrap">
          <div className="header-inner">
            <div className="logo">
              <div className="logo-hex"/>
              <div>
                <div className="logo-mark">Repo<span>Recruit</span></div>
                <div className="logo-tag">Web3 Talent Sourcing</div>
              </div>
            </div>
            <div className="header-right">
              <button className="saved-btn" onClick={()=>setShowSaved(true)}>
                ‚òÖ Saved {savedCount > 0 && <span className="saved-count">{savedCount}</span>}
              </button>
              <div className="status-pill"><div className="dot"/> GitHub API Live</div>
            </div>
          </div>
        </div>
      </header>

      <div className="wrap">
        <div className="hero">
          <div className="eyebrow">‚¨° Web3 Recruiter Intelligence</div>
          <h1 className="hero-title">Find <em>builders</em>,<br/><span className="dim">not just developers</span></h1>
          <p className="hero-sub">Surface web3 talent from GitHub ‚Äî with protocol badges, activity scores, language detection, and LinkedIn search. Built for web3 recruiters.</p>
        </div>

        {/* Mode Toggle */}
        <div className="mode-toggle">
          <button className={'mode-btn'+(mode==='repo'?' active':'')} onClick={()=>setMode('repo')}>‚å® Repo Search</button>
          <button className={'mode-btn'+(mode==='ai'?' active':'')} onClick={()=>setMode('ai')}>‚ú¶ AI-Assisted</button>
        </div>

        {/* Repo Search */}
        {mode==='repo' && (
          <div className="search-card">
            <div className="field-label">// GitHub Repository</div>
            <div className="input-row">
              <input className="repo-input" type="text" value={repoInput} onChange={e=>setRepoInput(e.target.value)} onKeyDown={e=>e.key==='Enter'&&!loading&&fetchRepo()} placeholder="owner/repository ‚Äî e.g. Uniswap/v3-core" autoComplete="off" spellCheck={false}/>
              <button className="search-btn" onClick={()=>fetchRepo()} disabled={loading}>{loading?'...':'Search ‚Üí'}</button>
            </div>
            <p className="hint">Try <span>aave/aave-v3-core</span>, <span>solana-labs/solana</span>, <span>matter-labs/zksync</span></p>
            <div className="token-row">
              <div className="field-label">// GitHub Token <span style={{color:'var(--text3)',fontSize:'9px'}}>(optional ‚Äî raises rate limit 60 ‚Üí 5,000/hr)</span></div>
              <input className="token-input" type="password" value={tokenInput} onChange={e=>setTokenInput(e.target.value)} placeholder="ghp_xxxxxxxxxxxx"/>
              <p className="token-note">Never stored ‚Äî sent only to GitHub's API in your browser. <a href="https://github.com/settings/tokens/new?scopes=read:user&description=RepoRecruit" target="_blank">Generate one here ‚Üí</a></p>
            </div>
          </div>
        )}

        {/* AI Search */}
        {mode==='ai' && (
          <div className="search-card">
            <div className="field-label">// Describe the developer you're looking for</div>
            <div className="input-row" style={{marginBottom:'12px'}}>
              <input className="ai-input" type="text" value={aiQuery} onChange={e=>setAiQuery(e.target.value)} onKeyDown={e=>e.key==='Enter'&&handleAISearch()} placeholder="e.g. Solidity developer with DeFi experience, Rust L2 engineer, ZK proof engineer..."/>
              <button className="ai-btn" onClick={handleAISearch}>Find Repos ‚Üí</button>
            </div>
            <div style={{marginBottom:'10px'}}>
              <div className="field-label" style={{marginBottom:'8px'}}>// Quick role presets</div>
              <div className="role-presets">
                {Object.keys(WEB3_KB.roles).slice(0,8).map(role => (
                  <button key={role} className="preset-btn" onClick={()=>handlePreset(role)}>{role}</button>
                ))}
              </div>
            </div>
            {aiSuggestions.length > 0 && (
              <div className="ai-suggestions">
                <div className="ai-suggestions-title">// Recommended repositories ({aiSuggestions.length})</div>
                <div className="suggestion-grid">
                  {aiSuggestions.map((s,i) => (
                    <div key={i} className="suggestion-card" onClick={()=>{ setRepoInput(s.repo); setMode('repo'); setTimeout(()=>fetchRepo(s.repo),100); }}>
                      <div className="suggestion-repo">{s.repo}</div>
                      <div className="suggestion-reason">{s.reason}</div>
                      <div className="suggestion-tags">
                        {s.tags.map(t=><span key={t} className="badge badge-lang">{t}</span>)}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
            <div className="token-row">
              <div className="field-label">// GitHub Token <span style={{color:'var(--text3)',fontSize:'9px'}}>(optional but recommended)</span></div>
              <input className="token-input" type="password" value={tokenInput} onChange={e=>setTokenInput(e.target.value)} placeholder="ghp_xxxxxxxxxxxx"/>
              <p className="token-note">Never stored ‚Äî sent only to GitHub's API. <a href="https://github.com/settings/tokens/new?scopes=read:user&description=RepoRecruit" target="_blank">Generate one here ‚Üí</a></p>
            </div>
          </div>
        )}

        {error && <div className="error-box">‚ö† {error}</div>}

        {loading && (
          <div className="loader">
            <div className="loader-bar"><div className="loader-fill"/></div>
            <p className="loader-text">{loadingText}</p>
            {loadingSubtext && <p className="loader-sub">{loadingSubtext}</p>}
          </div>
        )}

        {contributors.length > 0 && !loading && (
          <>
            {repoInfo && (
              <div className="repo-banner">
                <div>
                  <div className="field-label">// Repository</div>
                  <div className="repo-title">{repoInfo.full_name}</div>
                  {repoInfo.description && <div className="repo-desc">{repoInfo.description}</div>}
                </div>
                <div className="repo-stat">‚≠ê {(repoInfo.stargazers_count||0).toLocaleString()}</div>
                <div className="repo-stat">üç¥ {(repoInfo.forks_count||0).toLocaleString()}</div>
                {repoInfo.language && <div className="repo-stat">{'{ }'} {repoInfo.language}</div>}
                <a className="li-btn" style={{fontSize:'11px',padding:'6px 14px'}} href={repoInfo.html_url} target="_blank">GitHub ‚Üó</a>
              </div>
            )}

            <div className="stats-bar">
              <div className="stat"><div className="stat-num" style={{color:'var(--text)'}}>{contributors.length}</div><div className="stat-label">Contributors</div></div>
              <div className="stat"><div className="stat-num" style={{color:'var(--accent)'}}>{withEmail}</div><div className="stat-label">Public Emails</div></div>
              <div className="stat"><div className="stat-num" style={{color:'var(--accent2)'}}>{activeDevs}</div><div className="stat-label">Active (90d)</div></div>
              <div className="stat"><div className="stat-num" style={{color:'var(--purple)'}}>{web3Devs}</div><div className="stat-label">Web3 Signals</div></div>
              <div className="stat"><div className="stat-num" style={{color:'var(--accent3)'}}>{withLocation}</div><div className="stat-label">With Location</div></div>
              <div className="stat"><div className="stat-num" style={{color:'var(--pink)'}}>{savedCount}</div><div className="stat-label">Saved</div></div>
            </div>

            <div className="results-header">
              <div className="results-meta">
                <h2 className="results-title">Contributors</h2>
                <span className="count-pill">{filtered.length}</span>
              </div>
              <div className="btn-group">
                <input className="search-filter" type="text" value={textFilter} onChange={e=>setTextFilter(e.target.value)} placeholder="Filter by name, location..."/>
                <button className="outline-btn" onClick={exportCSV}>Export CSV</button>
              </div>
            </div>

            <div className="filter-bar">
              {[['all','All'],['email','Has Email'],['active','Active 90d'],['saved','Saved']].map(([val,label])=>(
                <button key={val} className={'filter-btn'+(filter===val?' active':'')} onClick={()=>setFilter(val)}>{label}</button>
              ))}
              {allLangs.length > 0 && (
                <>
                  <div className="filter-sep"/>
                  {allLangs.map(lang=>(
                    <button key={lang} className={'lang-filter-btn'+(langFilter===lang?' active':'')} onClick={()=>setLangFilter(langFilter===lang?'all':lang)}>{lang}</button>
                  ))}
                </>
              )}
            </div>

            <div className="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Contributor</th>
                    <th>Handle</th>
                    <th>Web3 Signals</th>
                    <th>Score</th>
                    <th>Activity</th>
                    <th>Email</th>
                    <th>Location</th>
                    <th>LinkedIn</th>
                    <th>Save</th>
                  </tr>
                </thead>
                <tbody>
                  {filtered.map(c => {
                    const score = calcActivityScore(c);
                    const act = activityLabel(c);
                    const isSaved = !!saved[c.login];
                    return (
                      <tr key={c.login}>
                        <td>
                          <div className="avatar-cell">
                            <img className="avatar" src={c.avatar_url} alt={c.login} loading="lazy" onClick={()=>openProfile(c)}/>
                            <div>
                              <div className="name-text" onClick={()=>openProfile(c)}>{c.name||c.login}</div>
                              {c.company && <div className="sub-text">{c.company}</div>}
                              {notes[c.login] && <div className="sub-text" style={{color:'var(--accent3)'}}>üìù {notes[c.login].slice(0,30)}{notes[c.login].length>30?'...':''}</div>}
                            </div>
                          </div>
                        </td>
                        <td><a className="handle-link" href={c.html_url} target="_blank">@{c.login}</a></td>
                        <td>
                          <div className="badge-cell">
                            {c.badges.slice(0,4).map(b=><span key={b.key} className={'badge '+b.cls}>{b.label}</span>)}
                            {c.badges.length===0 && <span className="no-val">‚Äî</span>}
                          </div>
                        </td>
                        <td>
                          <div className="score-cell">
                            <div className="score-bar-wrap">
                              <span className="score-num" style={{color:scoreColor(score)}}>{score}</span>
                              <div className="score-bar"><div className="score-fill" style={{width:score+'%',background:scoreColor(score)}}/></div>
                            </div>
                            <div className="score-label">{score>=70?'High':score>=40?'Mid':'Low'}</div>
                          </div>
                        </td>
                        <td>
                          <span className={'activity-dot '+act.cls}/>
                          <span className="activity-text" style={{color: act.cls==='activity-hot'?'var(--accent)':act.cls==='activity-warm'?'var(--accent3)':'var(--text3)'}}>{act.text}</span>
                        </td>
                        <td>{c.email?<a className="email-link" href={'mailto:'+c.email}>{c.email}</a>:<span className="no-val">‚Äî</span>}</td>
                        <td><span style={{fontSize:'11px',color:'var(--text2)'}}>{c.location||<span className="no-val">‚Äî</span>}</span></td>
                        <td><a className="li-btn" href={liSearch(c)} target="_blank">Search ‚Üó</a></td>
                        <td><button className={'save-btn'+(isSaved?' saved':'')} onClick={()=>toggleSave(c)} title={isSaved?'Unsave':'Save'}>{isSaved?'‚òÖ':'‚òÜ'}</button></td>
                      </tr>
                    );
                  })}
                </tbody>
              </table>
            </div>
          </>
        )}
      </div>

      {/* Profile Drawer */}
      {profileOpen && (
        <div className="overlay" onClick={e=>e.target===e.currentTarget&&setProfileOpen(null)}>
          <div className="drawer">
            <div className="drawer-header">
              <div className="drawer-title">Profile</div>
              <button className="close-btn" onClick={()=>setProfileOpen(null)}>‚úï</button>
            </div>
            <div className="profile-top">
              <img className="profile-avatar" src={profileOpen.avatar_url} alt={profileOpen.login}/>
              <div>
                <div className="profile-name">{profileOpen.name||profileOpen.login}</div>
                <div className="profile-handle"><a className="handle-link" href={profileOpen.html_url} target="_blank">@{profileOpen.login}</a></div>
                {profileOpen.bio && <div className="profile-bio">{profileOpen.bio}</div>}
                <div className="profile-meta">
                  {profileOpen.location && <span className="profile-meta-item">üìç {profileOpen.location}</span>}
                  {profileOpen.company && <span className="profile-meta-item">üè¢ {profileOpen.company}</span>}
                  {profileOpen.email && <span className="profile-meta-item">‚úâ {profileOpen.email}</span>}
                  <span className="profile-meta-item">üì¶ {profileOpen.publicRepos||0} repos</span>
                  <span className="profile-meta-item">‚ö° {profileOpen.contributions.toLocaleString()} commits</span>
                </div>
              </div>
            </div>

            {profileOpen.badges && profileOpen.badges.length > 0 && (
              <div className="profile-section">
                <div className="profile-section-title">Web3 Signals</div>
                <div style={{display:'flex',flexWrap:'wrap',gap:'6px'}}>
                  {profileOpen.badges.map(b=><span key={b.key} className={'badge '+b.cls} style={{fontSize:'11px',padding:'5px 10px'}}>{b.label}</span>)}
                </div>
              </div>
            )}

            <div className="profile-section">
              <div className="profile-section-title">Activity Score</div>
              <div style={{display:'flex',alignItems:'center',gap:'16px'}}>
                <span style={{fontFamily:"'DM Serif Display',serif",fontSize:'48px',color:scoreColor(calcActivityScore(profileOpen))}}>{calcActivityScore(profileOpen)}</span>
                <div>
                  <div style={{fontSize:'11px',color:'var(--text2)',marginBottom:'6px'}}>Based on recency, commit volume & repo diversity</div>
                  <div style={{display:'flex',gap:'8px',fontSize:'10px',color:'var(--text3)'}}>
                    <span>‚ö° {profileOpen.contributions} commits to this repo</span>
                    {profileOpen.daysSinceActive && <span>üïê Last active {Math.round(profileOpen.daysSinceActive)}d ago</span>}
                  </div>
                </div>
              </div>
            </div>

            {profileData[profileOpen.login]?.repos?.length > 0 && (
              <div className="profile-section">
                <div className="profile-section-title">Top Repositories</div>
                <div className="repo-cards">
                  {profileData[profileOpen.login].repos.slice(0,6).map(r=>(
                    <a key={r.id} className="repo-card" href={r.html_url} target="_blank">
                      <div className="repo-card-name">{r.name}</div>
                      <div className="repo-card-desc">{r.description||'No description'}</div>
                      <div className="repo-card-meta">
                        <span>‚≠ê {r.stargazers_count}</span>
                        {r.language && <span>{r.language}</span>}
                      </div>
                    </a>
                  ))}
                </div>
              </div>
            )}

            <div className="profile-section">
              <div className="profile-section-title">Recruiter Notes</div>
              <textarea className="note-area" value={noteText} onChange={e=>setNoteText(e.target.value)} placeholder="Add notes about this candidate ‚Äî interview stage, fit, follow-up date..."/>
              <button className="save-note-btn" onClick={saveNote}>Save Note</button>
            </div>

            <div style={{display:'flex',gap:'10px',marginTop:'8px',flexWrap:'wrap'}}>
              <a className="li-btn" style={{fontSize:'11px',padding:'8px 16px'}} href={liSearch(profileOpen)} target="_blank">Search LinkedIn ‚Üó</a>
              <a className="li-btn" style={{fontSize:'11px',padding:'8px 16px'}} href={profileOpen.html_url} target="_blank">GitHub Profile ‚Üó</a>
              <button className={'save-btn'+(saved[profileOpen.login]?' saved':'')} style={{fontSize:'16px',padding:'6px 14px'}} onClick={()=>toggleSave(profileOpen)}>{saved[profileOpen.login]?'‚òÖ Saved':'‚òÜ Save'}</button>
            </div>
          </div>
        </div>
      )}

      {/* Saved Panel */}
      {showSaved && (
        <div className="overlay" onClick={e=>e.target===e.currentTarget&&setShowSaved(false)}>
          <div className="drawer">
            <div className="drawer-header">
              <div className="drawer-title">Saved Candidates ({savedCount})</div>
              <button className="close-btn" onClick={()=>setShowSaved(false)}>‚úï</button>
            </div>
            {savedCount === 0 ? (
              <div style={{textAlign:'center',padding:'40px 0',color:'var(--text3)',fontSize:'13px'}}>
                No saved candidates yet.<br/>Click ‚òÜ on any row to save a candidate.
              </div>
            ) : (
              <div className="saved-panel">
                {Object.values(saved).map(c=>(
                  <div key={c.login} className="saved-card">
                    <img className="avatar" src={c.avatar_url} alt={c.login} style={{width:'40px',height:'40px'}}/>
                    <div className="saved-card-info">
                      <div className="saved-card-name">{c.name||c.login}</div>
                      <a className="saved-card-handle handle-link" href={c.html_url} target="_blank">@{c.login}</a>
                      {notes[c.login] && <div className="saved-card-note">üìù {notes[c.login]}</div>}
                    </div>
                    <button className="unsave-btn" onClick={()=>toggleSave(c)}>‚úï</button>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      )}

      <footer>
        <div className="wrap">
          RepoRecruit ‚Äî Web3 Talent Intelligence ¬∑ Data from the public GitHub API<br/>
          Only publicly disclosed information is shown ¬∑ Reach out via GitHub, not scraped emails
        </div>
      </footer>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
