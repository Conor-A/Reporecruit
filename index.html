<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RepoRecruit â€” Web3 Talent</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#080a0f;--s1:#0e1117;--s2:#151921;--s3:#1c2230;
  --b1:#1a2035;--b2:#243050;
  --a:#00e5a0;--a2:#3d7fff;--a3:#f59e0b;--warn:#ff6b35;--pur:#a78bfa;
  --t:#e2e8f4;--t2:#7a8ba8;--t3:#3d4f6b;
}
html,body{height:100%;background:var(--bg);color:var(--t);font-family:'JetBrains Mono',monospace;overflow-x:hidden}
.grid-bg{position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:linear-gradient(rgba(0,229,160,.025) 1px,transparent 1px),linear-gradient(90deg,rgba(0,229,160,.025) 1px,transparent 1px);
  background-size:48px 48px}
.orb{position:fixed;border-radius:50%;filter:blur(90px);opacity:.1;pointer-events:none}
.orb1{width:500px;height:500px;background:var(--a);top:-150px;right:-150px;animation:drift 18s ease-in-out infinite}
.orb2{width:400px;height:400px;background:var(--a2);bottom:-100px;left:-100px;animation:drift 22s ease-in-out infinite reverse}
@keyframes drift{0%,100%{transform:translate(0,0)}50%{transform:translate(25px,15px)}}
.wrap{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 24px}

/* HEADER */
header{border-bottom:1px solid var(--b1);padding:14px 0;position:sticky;top:0;background:rgba(8,10,15,.95);backdrop-filter:blur(16px);z-index:100}
.hinner{display:flex;align-items:center;justify-content:space-between;gap:12px}
.logo{display:flex;align-items:center;gap:10px}
.hex{width:30px;height:30px;background:var(--a);clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%)}
.logo-text{font-family:'DM Serif Display',serif;font-size:20px}.logo-text span{color:var(--a)}
.logo-sub{font-size:9px;color:var(--t3);letter-spacing:2px;text-transform:uppercase}
.hright{display:flex;align-items:center;gap:10px}
.saved-btn{display:flex;align-items:center;gap:6px;background:var(--s1);border:1px solid var(--b2);border-radius:6px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;padding:7px 14px;transition:all .2s}
.saved-btn:hover{border-color:var(--a3);color:var(--a3)}
.sc{background:var(--a3);color:#000;border-radius:10px;font-size:9px;font-weight:700;padding:1px 6px;margin-left:2px}
.pill{display:flex;align-items:center;gap:6px;font-size:10px;color:var(--t2);background:var(--s1);border:1px solid var(--b1);padding:5px 12px;border-radius:20px}
.dot{width:5px;height:5px;border-radius:50%;background:var(--a);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* HERO */
.hero{padding:52px 0 36px;text-align:center}
.eyebrow{display:inline-flex;align-items:center;gap:8px;font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--a);margin-bottom:18px;border:1px solid rgba(0,229,160,.2);padding:5px 14px;border-radius:20px;background:rgba(0,229,160,.05)}
.htitle{font-family:'DM Serif Display',serif;font-size:clamp(32px,5vw,54px);line-height:1.05;margin-bottom:14px}
.htitle em{font-style:italic;color:var(--a)}
.htitle .dim{color:var(--t2)}
.hsub{font-size:13px;color:var(--t2);line-height:1.8;max-width:500px;margin:0 auto 36px}

/* MODE TOGGLE */
.mode-toggle{display:flex;background:var(--s1);border:1px solid var(--b1);border-radius:8px;padding:4px;max-width:360px;margin:0 auto 28px}
.mbtn{flex:1;background:transparent;border:none;border-radius:5px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:1px;padding:9px 16px;text-transform:uppercase;transition:all .2s}
.mbtn.on{background:var(--s3);color:var(--t);border:1px solid var(--b2)}

/* SEARCH CARD */
.card{background:var(--s1);border:1px solid var(--b2);border-radius:10px;padding:26px;max-width:720px;margin:0 auto 36px;position:relative;overflow:hidden}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--a),var(--a2))}
.flabel{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--t3);margin-bottom:8px}
.irow{display:flex;gap:10px}
input[type=text],input[type=password],textarea{background:var(--bg);border:1px solid var(--b2);border-radius:5px;color:var(--t);font-family:'JetBrains Mono',monospace;font-size:13px;padding:11px 14px;outline:none;transition:all .2s;width:100%}
input:focus,textarea:focus{border-color:var(--a);box-shadow:0 0 0 3px rgba(0,229,160,.07)}
input::placeholder,textarea::placeholder{color:var(--t3)}
.sbtn{background:var(--a);border:none;border-radius:5px;color:#050709;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:700;letter-spacing:1px;padding:11px 22px;text-transform:uppercase;transition:all .2s;white-space:nowrap}
.sbtn:hover:not(:disabled){background:#00ffb3;box-shadow:0 0 18px rgba(0,229,160,.3);transform:translateY(-1px)}
.sbtn:disabled{opacity:.35;cursor:not-allowed;transform:none}
.abtn{background:linear-gradient(135deg,var(--a2),var(--pur));border:none;border-radius:5px;color:#fff;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:700;letter-spacing:1px;padding:11px 22px;text-transform:uppercase;transition:all .2s;white-space:nowrap}
.abtn:hover{opacity:.85;transform:translateY(-1px)}
.hint{margin-top:9px;font-size:11px;color:var(--t3)}.hint span{color:var(--t2)}
.trow{margin-top:14px;padding-top:14px;border-top:1px solid var(--b1)}
.tnote{margin-top:6px;font-size:10px;color:var(--t3);line-height:1.7}
.tnote a{color:var(--a2)}

/* AI suggestions */
.ai-sugg{margin-top:20px}
.ai-sugg-title{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--t3);margin-bottom:10px}
.sgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:9px}
.scard{background:var(--s2);border:1px solid var(--b1);border-radius:6px;padding:12px 14px;cursor:pointer;transition:all .2s}
.scard:hover{border-color:var(--a2);transform:translateY(-1px)}
.srepo{font-size:11px;color:var(--a2);margin-bottom:4px}
.sreason{font-size:10px;color:var(--t3);line-height:1.5}
.stags{display:flex;gap:4px;margin-top:7px;flex-wrap:wrap}
.presets{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:14px}
.preset{background:var(--s2);border:1px solid var(--b1);border-radius:20px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;padding:5px 12px;transition:all .2s}
.preset:hover{border-color:var(--a2);color:var(--a2)}

/* ERROR / LOADER */
.erbox{background:rgba(255,107,53,.07);border:1px solid rgba(255,107,53,.25);border-radius:6px;padding:14px 18px;font-size:12px;color:var(--warn);margin-bottom:18px;max-width:720px;margin-left:auto;margin-right:auto}
.loader{text-align:center;padding:64px 0}
.lbar{width:220px;height:2px;background:var(--b2);border-radius:2px;margin:0 auto 18px;overflow:hidden;position:relative}
.lfill{position:absolute;top:0;left:0;width:70px;height:100%;background:linear-gradient(90deg,var(--a),var(--a2));animation:lslide 1.2s ease-in-out infinite}
@keyframes lslide{0%{transform:translateX(-70px)}100%{transform:translateX(220px)}}
.ltext{font-size:12px;color:var(--t2)}.lsub{font-size:10px;color:var(--t3);margin-top:5px}

/* REPO BANNER */
.rbanner{display:flex;align-items:center;gap:18px;flex-wrap:wrap;background:var(--s1);border:1px solid var(--b2);border-radius:8px;padding:14px 18px;margin-bottom:18px}
.rtitle{font-family:'DM Serif Display',serif;font-size:19px}
.rdesc{font-size:10px;color:var(--t3);max-width:360px;margin-top:3px}
.rstat{display:flex;align-items:center;gap:5px;font-size:12px;color:var(--t2)}

/* STATS */
.sbar{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:11px;margin-bottom:22px}
.stat{background:var(--s1);border:1px solid var(--b1);border-radius:8px;padding:13px 16px;transition:border-color .2s}
.stat:hover{border-color:var(--b2)}
.snum{font-family:'DM Serif Display',serif;font-size:28px;line-height:1;margin-bottom:4px}
.slabel{font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:var(--t3)}

/* RESULTS HEADER */
.rheader{display:flex;align-items:center;justify-content:space-between;margin-bottom:13px;flex-wrap:wrap;gap:10px}
.rmeta{display:flex;align-items:center;gap:10px}
.rtitle2{font-family:'DM Serif Display',serif;font-size:21px}
.cpill{background:var(--s2);border:1px solid var(--b2);border-radius:20px;font-size:10px;color:var(--a);padding:3px 10px}
.bgroup{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.obtn{background:transparent;border:1px solid var(--b2);border-radius:5px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:1px;padding:7px 13px;text-transform:uppercase;transition:all .2s}
.obtn:hover{border-color:var(--a);color:var(--a)}
.sfilter{background:var(--s1);border:1px solid var(--b1);border-radius:5px;color:var(--t);font-family:'JetBrains Mono',monospace;font-size:11px;padding:7px 12px;outline:none;width:190px}
.sfilter:focus{border-color:var(--a2)}
.sfilter::placeholder{color:var(--t3)}

/* FILTER BAR */
.fbar{display:flex;gap:7px;margin-bottom:14px;flex-wrap:wrap;align-items:center}
.fbtn{background:var(--s1);border:1px solid var(--b1);border-radius:20px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;padding:5px 13px;transition:all .2s}
.fbtn.on{border-color:var(--a);color:var(--a);background:rgba(0,229,160,.06)}
.fsep{width:1px;height:18px;background:var(--b1);margin:0 3px}
.lfbtn{background:var(--s2);border:1px solid var(--b1);border-radius:4px;color:var(--t3);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:.5px;padding:4px 10px;text-transform:uppercase;transition:all .2s}
.lfbtn.on{border-color:var(--pur);color:var(--pur);background:rgba(167,139,250,.1)}

/* TABLE */
.twrap{overflow-x:auto;border:1px solid var(--b1);border-radius:10px;margin-bottom:56px}
table{width:100%;border-collapse:collapse;font-size:12px}
thead{background:var(--s2);border-bottom:1px solid var(--b2)}
th{text-align:left;padding:11px 13px;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--t3);white-space:nowrap}
tbody tr{border-bottom:1px solid var(--b1);transition:background .12s}
tbody tr:last-child{border-bottom:none}
tbody tr:hover{background:rgba(255,255,255,.02)}
td{padding:12px 13px;vertical-align:middle}
.avcell{display:flex;align-items:center;gap:10px;min-width:155px}
.av{width:34px;height:34px;border-radius:50%;border:1px solid var(--b2);object-fit:cover;flex-shrink:0;cursor:pointer;transition:transform .2s}
.av:hover{transform:scale(1.1)}
.ntext{font-weight:500;cursor:pointer}.ntext:hover{color:var(--a)}
.stext{font-size:10px;color:var(--t3);margin-top:2px}
.hlink{color:var(--a2);text-decoration:none}.hlink:hover{opacity:.7}
.elink{color:var(--a);text-decoration:none;font-size:11px}.elink:hover{opacity:.7}
.noval{color:var(--t3);font-size:11px}
.cbadge{background:var(--s2);border:1px solid var(--b1);border-radius:4px;color:var(--t2);font-size:11px;padding:3px 8px}
.bdgcell{display:flex;flex-wrap:wrap;gap:4px;min-width:90px}
.bdg{border-radius:4px;font-size:9px;font-weight:700;letter-spacing:.5px;padding:3px 7px;text-transform:uppercase;white-space:nowrap}
.bdg-eth{background:rgba(98,126,234,.15);border:1px solid rgba(98,126,234,.3);color:#8fa8f5}
.bdg-sol{background:rgba(153,69,255,.15);border:1px solid rgba(153,69,255,.3);color:#c084fc}
.bdg-rust{background:rgba(206,66,43,.15);border:1px solid rgba(206,66,43,.3);color:#f87171}
.bdg-cos{background:rgba(100,149,237,.15);border:1px solid rgba(100,149,237,.3);color:#93c5fd}
.bdg-btc{background:rgba(247,147,26,.15);border:1px solid rgba(247,147,26,.3);color:#fbbf24}
.bdg-near{background:rgba(0,236,151,.15);border:1px solid rgba(0,236,151,.3);color:#34d399}
.bdg-dot{background:rgba(230,0,122,.15);border:1px solid rgba(230,0,122,.3);color:#f472b6}
.bdg-avax{background:rgba(232,65,66,.15);border:1px solid rgba(232,65,66,.3);color:#fca5a5}
.bdg-lang{background:rgba(167,139,250,.12);border:1px solid rgba(167,139,250,.25);color:#a78bfa}
.bdg-defi{background:rgba(0,229,160,.1);border:1px solid rgba(0,229,160,.25);color:var(--a)}
.score-wrap{min-width:75px}
.score-row{display:flex;align-items:center;gap:7px}
.score-n{font-family:'DM Serif Display',serif;font-size:18px;min-width:26px}
.score-bar{flex:1;height:3px;background:var(--b2);border-radius:2px;overflow:hidden;min-width:36px}
.score-fill{height:100%;border-radius:2px}
.score-lbl{font-size:9px;color:var(--t3);margin-top:2px;letter-spacing:1px;text-transform:uppercase}
.adot{width:7px;height:7px;border-radius:50%;display:inline-block;margin-right:5px;vertical-align:middle}
.ahot{background:var(--a);box-shadow:0 0 5px rgba(0,229,160,.5)}
.awarm{background:var(--a3)}
.acold{background:var(--t3)}
.atext{font-size:10px;vertical-align:middle}
.libtn{display:inline-flex;align-items:center;gap:4px;background:rgba(61,127,255,.08);border:1px solid rgba(61,127,255,.2);border-radius:4px;color:var(--a2);font-family:'JetBrains Mono',monospace;font-size:9px;padding:4px 9px;text-decoration:none;transition:all .2s;letter-spacing:.5px}
.libtn:hover{background:rgba(61,127,255,.18)}
.svbtn{background:transparent;border:1px solid var(--b1);border-radius:4px;color:var(--t3);cursor:pointer;font-size:13px;padding:4px 8px;transition:all .2s;line-height:1}
.svbtn:hover{border-color:var(--a3);color:var(--a3)}
.svbtn.on{border-color:var(--a3);color:var(--a3);background:rgba(245,158,11,.1)}

/* OVERLAY / DRAWER */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:300;backdrop-filter:blur(4px);display:flex;align-items:flex-end;justify-content:center;animation:fdin .2s ease}
@keyframes fdin{from{opacity:0}to{opacity:1}}
.drawer{background:var(--s1);border:1px solid var(--b2);border-radius:16px 16px 0 0;width:100%;max-width:820px;max-height:90vh;overflow-y:auto;padding:26px;animation:sdup .3s ease}
@keyframes sdup{from{transform:translateY(40px);opacity:0}to{transform:translateY(0);opacity:1}}
.dhead{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px}
.dtitle{font-family:'DM Serif Display',serif;font-size:21px}
.cbtn{background:var(--s2);border:1px solid var(--b1);border-radius:6px;color:var(--t2);cursor:pointer;font-size:16px;padding:4px 10px;transition:all .2s}
.cbtn:hover{border-color:var(--warn);color:var(--warn)}
.ptop{display:flex;align-items:flex-start;gap:18px;margin-bottom:22px}
.pav{width:68px;height:68px;border-radius:50%;border:2px solid var(--b2)}
.pname{font-family:'DM Serif Display',serif;font-size:24px;margin-bottom:3px}
.phandle{color:var(--a2);font-size:13px;margin-bottom:7px}
.pbio{font-size:12px;color:var(--t2);line-height:1.6;max-width:420px}
.pmeta{display:flex;gap:12px;flex-wrap:wrap;margin-top:9px}
.pmi{font-size:11px;color:var(--t3);display:flex;align-items:center;gap:4px}
.psec{margin-bottom:20px}
.psect{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--t3);margin-bottom:11px;border-bottom:1px solid var(--b1);padding-bottom:7px}
.rcards{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:9px}
.rcard{background:var(--s2);border:1px solid var(--b1);border-radius:6px;padding:11px;transition:all .2s;text-decoration:none;display:block}
.rcard:hover{border-color:var(--a2)}
.rcard-name{color:var(--a2);font-size:11px;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.rcard-desc{font-size:10px;color:var(--t3);line-height:1.5;height:28px;overflow:hidden}
.rcard-meta{display:flex;gap:9px;margin-top:7px;font-size:10px;color:var(--t3)}
.narea{width:100%;background:var(--bg);border:1px solid var(--b2);border-radius:5px;color:var(--t);font-family:'JetBrains Mono',monospace;font-size:12px;padding:12px;outline:none;resize:vertical;min-height:75px}
.narea:focus{border-color:var(--a2)}
.narea::placeholder{color:var(--t3)}
.nsave{margin-top:7px;background:var(--a2);border:none;border-radius:5px;color:#fff;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:700;letter-spacing:1px;padding:8px 17px;text-transform:uppercase;transition:all .2s}
.nsave:hover{opacity:.85}

/* OUTREACH */
.tone-row{display:flex;gap:7px;margin-bottom:12px;flex-wrap:wrap;align-items:center}
.tbtn{background:var(--s2);border:1px solid var(--b1);border-radius:4px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:1px;padding:6px 13px;text-transform:uppercase;transition:all .2s}
.tbtn.on{background:rgba(0,229,160,.1);border-color:var(--a);color:var(--a)}
.genbtn{background:var(--a);border:none;border-radius:4px;color:#050709;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:700;letter-spacing:1px;padding:6px 16px;text-transform:uppercase;transition:all .2s}
.genbtn:hover{background:#00ffb3}
.omsg-wrap{position:relative}
.omsg{width:100%;background:var(--bg);border:1px solid var(--b2);border-radius:5px;color:var(--t2);font-family:'JetBrains Mono',monospace;font-size:11px;line-height:1.75;padding:14px;outline:none;resize:vertical;min-height:210px}
.copybtn{position:absolute;top:9px;right:9px;background:var(--s3);border:1px solid var(--b2);border-radius:4px;color:var(--t2);cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:9px;font-weight:700;letter-spacing:1px;padding:5px 11px;text-transform:uppercase;transition:all .2s}
.copybtn.done{background:var(--a);color:#050709;border-color:var(--a)}
.onote{font-size:10px;color:var(--t3);margin-top:6px;line-height:1.6}

/* SAVED PANEL */
.spanel{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:11px}
.svc{background:var(--s2);border:1px solid var(--b1);border-radius:8px;padding:13px;display:flex;gap:11px;align-items:flex-start}
.svc-info{flex:1}
.svc-name{font-weight:500;font-size:13px;margin-bottom:3px}
.svc-handle{color:var(--a2);font-size:11px;margin-bottom:5px}
.svc-note{font-size:10px;color:var(--t3);line-height:1.5}
.unsave{background:transparent;border:none;color:var(--t3);cursor:pointer;font-size:15px;padding:0;transition:color .2s}
.unsave:hover{color:var(--warn)}
.empty{text-align:center;padding:40px 0;color:var(--t3);font-size:13px;line-height:2}

footer{border-top:1px solid var(--b1);padding:22px 0;text-align:center;font-size:10px;color:var(--t3);line-height:2}
</style>
</head>
<body>
<div class="grid-bg"></div>
<div class="orb orb1"></div>
<div class="orb orb2"></div>
<div id="app"></div>

<script>
// â”€â”€ Web3 Knowledge Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const KB = {
  "solidity developer":        { repos:["OpenZeppelin/openzeppelin-contracts","Uniswap/v3-core","aave/aave-v3-core","compound-finance/compound-protocol","curvefi/curve-contract","morpho-org/morpho-blue"], reason:"Core Solidity smart contract repos used by top DeFi protocols", tags:["Solidity","DeFi","EVM"] },
  "rust blockchain engineer":  { repos:["solana-labs/solana","paritytech/substrate","near/nearcore","aptos-labs/aptos-core","MystenLabs/sui"], reason:"Leading Rust-based L1 blockchain infrastructure projects", tags:["Rust","L1","Infrastructure"] },
  "defi protocol developer":   { repos:["Uniswap/v3-core","aave/aave-v3-core","makerdao/dss","balancer-labs/balancer-v2-monorepo","yearn/yearn-vaults"], reason:"Most forked and referenced DeFi protocol implementations", tags:["Solidity","DeFi","AMM"] },
  "layer 2 engineer":          { repos:["ethereum-optimism/optimism","OffchainLabs/arbitrum","0xPolygon/polygon-edge","matter-labs/zksync-era","starkware-libs/cairo-lang"], reason:"Core L2 scaling repos across optimistic and zk rollup stacks", tags:["L2","Rollups","zkEVM"] },
  "zk engineer":               { repos:["matter-labs/zksync-era","starkware-libs/cairo-lang","arkworks-rs/arkworks","succinctlabs/sp1","zcash/librustzcash"], reason:"Leading ZK proof systems, circuits, and zkVM projects", tags:["ZK","Cairo","Rust"] },
  "ethereum core developer":   { repos:["ethereum/go-ethereum","sigp/lighthouse","prysmaticlabs/prysm","ethereum/consensus-specs","ethereum/py-evm"], reason:"Core Ethereum client and consensus layer implementations", tags:["Go","Python","Ethereum"] },
  "nft developer":             { repos:["OpenZeppelin/openzeppelin-contracts","chiru-labs/ERC721A","thirdweb-dev/contracts","transmissions11/solmate"], reason:"ERC-721, ERC-1155 and token standard implementations", tags:["Solidity","NFT","ERC-721"] },
  "cross-chain developer":     { repos:["axelarnetwork/axelar-core","wormhole-foundation/wormhole","connext/monorepo","LayerZero-Labs/LayerZero"], reason:"Top cross-chain messaging and bridge protocol codebases", tags:["Cross-chain","Interop","Bridges"] },
  "web3 frontend developer":   { repos:["wevm/wagmi","rainbow-me/rainbowkit","ethers-io/ethers.js","wevm/viem","scaffold-eth/scaffold-eth-2"], reason:"Leading web3 frontend libraries and wallet tooling", tags:["TypeScript","React","wagmi"] },
  "cosmos developer":          { repos:["cosmos/cosmos-sdk","cosmos/ibc-go","osmosis-labs/osmosis","celestiaorg/celestia-core"], reason:"Core Cosmos SDK and IBC protocol implementations", tags:["Go","Cosmos","IBC"] },
  "security auditor":          { repos:["crytic/slither","trailofbits/manticore","OpenZeppelin/openzeppelin-contracts","foundry-rs/foundry"], reason:"Smart contract security tooling and audited reference implementations", tags:["Security","Auditing","Solidity"] },
  "move developer":            { repos:["aptos-labs/aptos-core","MystenLabs/sui","move-language/move"], reason:"Move language blockchain ecosystems", tags:["Move","Aptos","Sui"] }
};

const PROTOS = [
  { key:"eth",  label:"ETH",    cls:"bdg-eth",  kw:["ethereum","solidity","evm","uniswap","aave","compound","openzeppelin","hardhat","foundry","wagmi","ethers","viem","geth"] },
  { key:"sol",  label:"SOL",    cls:"bdg-sol",  kw:["solana","anchor","spl-token","solana-labs"] },
  { key:"rust", label:"Rust",   cls:"bdg-rust", kw:["rust","cargo","substrate","polkadot","parity","near","aptos","mysten","solana-labs"] },
  { key:"cos",  label:"Cosmos", cls:"bdg-cos",  kw:["cosmos","ibc","tendermint","osmosis","celestia"] },
  { key:"btc",  label:"BTC",    cls:"bdg-btc",  kw:["bitcoin","lightning","taproot","ordinals","btc"] },
  { key:"near", label:"NEAR",   cls:"bdg-near", kw:["near","nearcore","aurora-is-near"] },
  { key:"dot",  label:"DOT",    cls:"bdg-dot",  kw:["polkadot","substrate","parity","kusama","ink"] },
  { key:"avax", label:"AVAX",   cls:"bdg-avax", kw:["avalanche","avax","ava-labs"] }
];

const LANGS = ["solidity","rust","move","vyper","cairo","go","typescript"];
const LANG_LABELS = { solidity:"Solidity", rust:"Rust", move:"Move", vyper:"Vyper", cairo:"Cairo", go:"Go", typescript:"TypeScript" };

function detectBadges(repos) {
  if (!repos || !repos.length) return [];
  const text = repos.map(r => [r.name||"",r.description||"",r.language||"",...(r.topics||[])].join(" ")).join(" ").toLowerCase();
  const badges = [];
  const seen = new Set();
  PROTOS.forEach(p => { if (p.kw.some(k => text.includes(k)) && !seen.has(p.key)) { seen.add(p.key); badges.push({key:p.key,label:p.label,cls:p.cls}); } });
  const langs = repos.map(r=>(r.language||"").toLowerCase());
  LANGS.forEach(l => { if ((langs.includes(l)||text.includes(l)) && !seen.has("lang-"+l)) { seen.add("lang-"+l); badges.push({key:"lang-"+l,label:LANG_LABELS[l]||l,cls:"bdg-lang"}); } });
  if (["defi","dex","amm","lending","vault","yield","liquidity"].some(w=>text.includes(w)) && !seen.has("defi")) { seen.add("defi"); badges.push({key:"defi",label:"DeFi",cls:"bdg-defi"}); }
  return badges;
}

function calcScore(c) {
  const days = c.daysSince || 999;
  const rec = days < 30 ? 40 : days < 90 ? 25 : days < 180 ? 10 : 0;
  const com = Math.min(40, Math.floor(Math.log2((c.contributions||0)+1)*6));
  const rep = Math.min(20, c.publicRepos||0);
  return Math.min(99, rec+com+rep);
}

function scoreColor(s) { return s>=70?"var(--a)":s>=40?"var(--a3)":"var(--t3)"; }

function actInfo(c) {
  const d = c.daysSince;
  if (!d || d<30) return {cls:"ahot",col:"var(--a)",txt:"Active now"};
  if (d<90) return {cls:"awarm",col:"var(--a3)",txt:Math.round(d)+"d ago"};
  return {cls:"acold",col:"var(--t3)",txt:Math.round(d)+"d ago"};
}

function liUrl(c) {
  const n = c.name && c.name!==c.login ? c.name : c.login;
  return "https://www.google.com/search?q="+encodeURIComponent('"'+n+'" site:linkedin.com/in');
}

function dlFile(name, content, type) {
  const a = document.createElement("a");
  a.href = URL.createObjectURL(new Blob([content],{type}));
  a.download = name; a.click();
}

function generateOutreach(c, tone, repoInfo) {
  const first = c.name && c.name!==c.login ? c.name.split(" ")[0] : c.login;
  const bl = (c.badges||[]).map(b=>b.label);
  const commits = (c.contributions||0).toLocaleString();
  const repoFull = repoInfo ? repoInfo.full_name : "the repository";
  const repoShort = repoInfo ? repoInfo.name : "this project";
  const active = c.daysSince && c.daysSince < 60;

  const hasSol = bl.some(b=>["Solidity","ETH","DeFi"].includes(b));
  const hasRust = bl.includes("Rust");
  const hasCross = bl.some(b=>["DOT","Cosmos","NEAR","AVAX","SOL"].includes(b));
  const hasDefi = bl.includes("DeFi");

  let hook, role;
  if (hasCross && hasRust) {
    hook = "Your cross-chain and Rust work maps directly onto what we're building at Chainlink Labs. CCIP â€” our Cross-Chain Interoperability Protocol â€” is now live across 70+ networks including Solana, and we're scaling the engineering team building the next version. It's serious Rust work, distributed systems at a scale most projects never reach.";
    role = "protocol engineer on CCIP";
  } else if (hasSol && hasDefi) {
    hook = "The DeFi protocols you've contributed to â€” including "+repoShort+" â€” are built on top of Chainlink infrastructure: Price Feeds, Data Streams, VRF. We're hiring the engineers who want to work on that foundational layer itself, not just the protocols that sit on top of it. Different kind of leverage.";
    role = "smart contract / protocol engineer";
  } else if (hasRust) {
    hook = "At Chainlink Labs we run one of the most demanding distributed Rust codebases in the industry â€” our oracle node network processes data for over $18 trillion in onchain transaction value. We're expanding core engineering and your Rust background is exactly the profile we're looking for.";
    role = "distributed systems engineer";
  } else if (hasCross) {
    hook = "Chainlink CCIP is fast becoming the standard cross-chain protocol â€” Coinbase, Lido, Aave, and Swift are all building on it. Given your multi-ecosystem background, the role I have in mind is working on the interoperability layer that connects all of them.";
    role = "cross-chain protocol engineer";
  } else if (hasSol) {
    hook = "Your Solidity contributions to "+repoShort+" show you understand protocol design at a serious level. At Chainlink Labs we build the oracle and data infrastructure the entire DeFi stack depends on â€” Aave, GMX, Synthetix. We need engineers who've shipped in production.";
    role = "smart contract engineer";
  } else {
    hook = "Chainlink Labs is the infrastructure layer powering the majority of DeFi â€” Price Feeds, CCIP, Data Streams, VRF â€” and we're scaling the team that builds it. Your work on "+repoShort+" shows the depth we look for.";
    role = "senior engineer";
  }

  const actLine = active ? "I can see you've been actively shipping recently â€” " : "I know you may have a lot on, but ";

  if (tone==="brief") return (
    "Hi "+first+",\n\n"+
    "Saw your "+commits+" commits to "+repoFull+" â€” impressive work.\n\n"+
    "I'm recruiting a "+role+" at Chainlink Labs. "+(hasCross?"CCIP is live on 70+ chains â€” Rust-heavy, serious scale.":hasSol?"We power the oracle layer Aave, GMX, and Synthetix depend on.":"We run the infrastructure behind $18T+ in onchain transaction value.")+"\n\n"+
    "Worth a 15-min call?\n\n"+
    "[Your name] | Chainlink Labs Talent"
  );

  if (tone==="story") return (
    "Hi "+first+",\n\n"+
    "I'll be upfront â€” I found you through your GitHub contributions to "+repoFull+", and "+commits+" commits is a serious body of work. I wanted to reach out personally.\n\n"+
    hook+"\n\n"+
    "What makes Chainlink Labs different from most web3 companies is the scale of real-world impact. We're not building another protocol â€” we're the infrastructure that protocols depend on. Swift is using CCIP for tokenised asset settlement. Coinbase chose us as the exclusive bridge for all their wrapped assets. Mastercard is building on us to connect 3 billion cardholders to onchain rails.\n\n"+
    actLine+"I think your background is a strong match for the "+role+" role we're hiring for. I'd love to tell you more â€” would a short call this week work?\n\n"+
    "[Your name]\n[Your title] | Chainlink Labs Talent\nchainlinklabs.com/careers"
  );

  // default: direct
  return (
    "Hi "+first+",\n\n"+
    "I came across your work on "+repoFull+" â€” "+commits+" commits is a serious body of work.\n\n"+
    hook+"\n\n"+
    "I'm recruiting for a "+role+" role at Chainlink Labs. The team is fully remote, well-funded, and working on infrastructure that genuinely matters â€” Swift, Mastercard, Coinbase, and Fidelity are all building on what we ship.\n\n"+
    actLine+"would you be open to a 20-minute call to hear more? Happy to share full details first if that's easier.\n\n"+
    "[Your name]\n[Your title] | Chainlink Labs Talent"
  );
}

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let state = {
  mode:"repo", repoInput:"", tokenInput:"", aiQuery:"", aiSuggs:[],
  loading:false, loadingText:"", loadingSub:"",
  error:"", contributors:[], repoInfo:null,
  filter:"all", langFilter:"all", textFilter:"",
  saved: JSON.parse(localStorage.getItem("rr_saved")||"{}"),
  notes: JSON.parse(localStorage.getItem("rr_notes")||"{}"),
  showSaved:false, profileOpen:null, profileRepos:{},
  noteText:"", outreachTone:"direct", outreachMsg:"", outreachCopied:false
};

function setState(patch) {
  Object.assign(state, patch);
  if (patch.saved !== undefined) localStorage.setItem("rr_saved", JSON.stringify(state.saved));
  if (patch.notes !== undefined) localStorage.setItem("rr_notes", JSON.stringify(state.notes));
  render();
}
// Update state without re-rendering (for text inputs to avoid focus loss)
function setStateQuiet(patch) {
  Object.assign(state, patch);
}

// â”€â”€ API helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getHeaders() {
  const h = {"Accept":"application/vnd.github.v3+json"};
  if (state.tokenInput.trim()) h["Authorization"] = "Bearer "+state.tokenInput.trim();
  return h;
}

async function fetchRepo() {
  const input = state.repoInput.trim();
  if (!input.includes("/")) { setState({error:"Enter a valid repo as owner/repository â€” e.g. Uniswap/v3-core"}); return; }
  const [owner, repo] = input.split("/").map(s=>s.trim());
  if (!owner||!repo) { setState({error:"Enter a valid repo as owner/repository"}); return; }
  const h = getHeaders();
  setState({loading:true,loadingText:"Fetching repository info...",loadingSub:"",error:"",contributors:[],repoInfo:null});

  try {
    const rr = await fetch("https://api.github.com/repos/"+owner+"/"+repo, {headers:h});
    if (!rr.ok) {
      const e = await rr.json().catch(()=>({}));
      throw new Error(rr.status===404?"Repository not found â€” check the spelling":rr.status===403?"Rate limit hit â€” add a GitHub token to continue":rr.status===401?"Invalid GitHub token":e.message||"GitHub API error ("+rr.status+")");
    }
    const rd = await rr.json();
    setState({repoInfo:rd,loadingText:"Fetching contributors...",loadingSub:"Paginating commit history"});

    let all = [];
    for (let p=1;p<=5;p++) {
      const cr = await fetch("https://api.github.com/repos/"+owner+"/"+repo+"/contributors?per_page=100&page="+p+"&anon=false",{headers:h});
      if (!cr.ok) { const e=await cr.json().catch(()=>({})); throw new Error(e.message||"Failed to fetch contributors"); }
      const cd = await cr.json();
      if (!Array.isArray(cd)||cd.length===0) break;
      all = all.concat(cd);
      if (cd.length<100) break;
    }
    if (all.length===0) throw new Error("No contributors found for this repository.");

    setState({loadingText:"Enriching "+all.length+" profiles...",loadingSub:"Fetching activity, languages & web3 signals"});
    const enriched = [];
    for (let i=0;i<all.length;i+=6) {
      const batch = all.slice(i,i+6);
      const res = await Promise.all(batch.map(async c => {
        try {
          const [pr,rr2] = await Promise.all([
            fetch("https://api.github.com/users/"+c.login,{headers:h}),
            fetch("https://api.github.com/users/"+c.login+"/repos?per_page=30&sort=updated",{headers:h})
          ]);
          const p = pr.ok ? await pr.json() : {};
          const repos = rr2.ok ? await rr2.json() : [];
          const lastPush = Array.isArray(repos)&&repos.length ? repos[0].pushed_at : null;
          const daysSince = lastPush ? (Date.now()-new Date(lastPush).getTime())/86400000 : null;
          return { login:c.login, avatar_url:c.avatar_url, html_url:c.html_url, contributions:c.contributions,
            name:p.name||c.login, email:p.email||null, location:p.location||null,
            company:p.company||null, bio:p.bio||null, publicRepos:p.public_repos||0,
            daysSince, badges:detectBadges(Array.isArray(repos)?repos:[]) };
        } catch {
          return {login:c.login,avatar_url:c.avatar_url,html_url:c.html_url,contributions:c.contributions,name:c.login,email:null,location:null,company:null,bio:null,publicRepos:0,daysSince:null,badges:[]};
        }
      }));
      enriched.push(...res);
      setState({loadingText:"Enriched "+Math.min(i+6,all.length)+" / "+all.length+" profiles..."});
    }
    setState({loading:false,contributors:enriched});
  } catch(e) {
    setState({loading:false,error:e.message});
  }
}

function aiSearch() {
  const q = state.aiQuery.toLowerCase().trim();
  if (!q) return;
  const scored = Object.entries(KB).map(([role,data]) => {
    const words = q.split(" ").filter(w=>w.length>2);
    const s = role.split(" ").filter(w=>words.includes(w)).length*2 + data.tags.filter(t=>words.some(w=>t.toLowerCase().includes(w))).length + (q.includes(role)?5:0);
    return {role,data,s};
  }).filter(x=>x.s>0).sort((a,b)=>b.s-a.s);

  const results = [];
  const src = scored.length ? scored.slice(0,3) : Object.entries(KB).slice(0,3).map(([role,data])=>({role,data}));
  src.forEach(({data}) => data.repos.slice(0,3).forEach(repo => results.push({repo,reason:data.reason,tags:data.tags})));
  setState({aiSuggs:results});
}

function getFiltered() {
  return state.contributors.filter(c => {
    if (state.filter==="email"&&!c.email) return false;
    if (state.filter==="active"&&(!c.daysSince||c.daysSince>90)) return false;
    if (state.filter==="saved"&&!state.saved[c.login]) return false;
    if (state.langFilter!=="all"&&!c.badges.some(b=>b.key==="lang-"+state.langFilter||b.key===state.langFilter)) return false;
    if (state.textFilter) {
      const q=state.textFilter.toLowerCase();
      if (![(c.name||""),(c.login||""),(c.location||""),(c.company||""),(c.bio||"")].some(v=>v.toLowerCase().includes(q))) return false;
    }
    return true;
  });
}

async function openProfile(c) {
  setState({profileOpen:c,noteText:state.notes[c.login]||"",outreachMsg:"",outreachCopied:false});
  if (!state.profileRepos[c.login]) {
    try {
      const r = await fetch("https://api.github.com/users/"+c.login+"/repos?per_page=6&sort=stars",{headers:getHeaders()});
      const repos = r.ok ? await r.json() : [];
      const pr = {...state.profileRepos};
      pr[c.login] = repos;
      setState({profileRepos:pr});
    } catch {}
  }
}

function copyOutreach() {
  if (!state.outreachMsg) return;
  navigator.clipboard.writeText(state.outreachMsg).then(()=>{
    setState({outreachCopied:true});
    setTimeout(()=>setState({outreachCopied:false}),2000);
  }).catch(()=>{});
}

// â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function el(tag, attrs, ...children) {
  const e = document.createElement(tag);
  if (attrs) Object.entries(attrs).forEach(([k,v]) => {
    if (k==="className") e.className=v;
    else if (k==="style"&&typeof v==="object") Object.assign(e.style,v);
    else if (k.startsWith("on")&&typeof v==="function") e.addEventListener(k.slice(2).toLowerCase(),v);
    else if (k==="htmlFor") e.htmlFor=v;
    else if (k==="checked") e.checked=v;
    else if (k==="disabled") e.disabled=v;
    else if (k==="readOnly") e.readOnly=v;
    else if (k==="value"&&(tag==="input"||tag==="textarea")) e.value=v;
    else e.setAttribute(k,v);
  });
  children.flat(Infinity).forEach(ch => {
    if (ch==null||ch===false) return;
    e.appendChild(typeof ch==="string"||typeof ch==="number" ? document.createTextNode(String(ch)) : ch);
  });
  return e;
}

function bdg(b) { return el("span",{className:"bdg "+b.cls},b.label); }

function render() {
  const app = document.getElementById("app");
  app.innerHTML = "";

  const filtered = getFiltered();
  const savedCount = Object.keys(state.saved).length;
  const withEmail = state.contributors.filter(c=>c.email).length;
  const activeDevs = state.contributors.filter(c=>c.daysSince&&c.daysSince<90).length;
  const web3Devs = state.contributors.filter(c=>c.badges&&c.badges.length>0).length;
  const allLangs = [...new Set(state.contributors.flatMap(c=>c.badges.filter(b=>b.key.startsWith("lang-")).map(b=>b.key.replace("lang-",""))))];

  // HEADER
  const header = el("header",{},
    el("div",{className:"wrap"},
      el("div",{className:"hinner"},
        el("div",{className:"logo"},
          el("div",{className:"hex"}),
          el("div",{},
            el("div",{className:"logo-text"},"Repo",el("span",{},"Recruit")),
            el("div",{className:"logo-sub"},"Web3 Talent Sourcing")
          )
        ),
        el("div",{className:"hright"},
          el("button",{className:"saved-btn",onClick:()=>setState({showSaved:true})},
            "â˜… Saved",
            savedCount>0?el("span",{className:"sc"},savedCount):null
          ),
          el("div",{className:"pill"},el("div",{className:"dot"}),"GitHub API Live")
        )
      )
    )
  );

  // HERO
  const hero = el("div",{className:"hero"},
    el("div",{className:"eyebrow"},"â¬¡ Web3 Recruiter Intelligence"),
    el("h1",{className:"htitle"},"Find ",el("em",{},"builders"),",",el("br",{})," ",el("span",{className:"dim"},"not just developers")),
    el("p",{className:"hsub"},"Surface web3 talent from GitHub â€” with protocol badges, activity scores, language detection, and Chainlink-tailored outreach. Built for web3 recruiters.")
  );

  // MODE TOGGLE
  const modeToggle = el("div",{className:"mode-toggle"},
    el("button",{className:"mbtn"+(state.mode==="repo"?" on":""),onClick:()=>setState({mode:"repo",aiSuggs:[]})}, "âŒ¨ Repo Search"),
    el("button",{className:"mbtn"+(state.mode==="ai"?" on":""),onClick:()=>setState({mode:"ai"})}, "âœ¦ AI-Assisted")
  );

  // SEARCH CARD
  let searchCard;
  if (state.mode==="repo") {
    const inp = el("input",{type:"text",className:"",value:state.repoInput,placeholder:"owner/repository â€” e.g. Uniswap/v3-core",autocomplete:"off",onInput:e=>setStateQuiet({repoInput:e.target.value})});
    inp.addEventListener("keydown",e=>{ if(e.key==="Enter"&&!state.loading) fetchRepo(); });
    const ti = el("input",{type:"password",value:state.tokenInput,placeholder:"ghp_xxxxxxxxxxxx",onInput:e=>setStateQuiet({tokenInput:e.target.value})});
    searchCard = el("div",{className:"card"},
      el("div",{className:"flabel"},"// GitHub Repository"),
      el("div",{className:"irow"},inp,
        el("button",{className:"sbtn",disabled:state.loading,onClick:fetchRepo},state.loading?"...":"Search â†’")
      ),
      el("p",{className:"hint"},"Try ",el("span",{},"aave/aave-v3-core"),", ",el("span",{},"solana-labs/solana"),", ",el("span",{},"matter-labs/zksync-era")),
      el("div",{className:"trow"},
        el("div",{className:"flabel"},"// GitHub Token ",el("span",{style:{color:"var(--t3)",fontSize:"9px"}},"(optional â€” raises rate limit 60 â†’ 5,000/hr)")),
        ti,
        el("p",{className:"tnote"},"Never stored â€” sent only to GitHub's API. ",el("a",{href:"https://github.com/settings/tokens/new?scopes=read:user&description=RepoRecruit",target:"_blank"},"Generate one here â†’"))
      )
    );
  } else {
    const aiq = el("input",{type:"text",value:state.aiQuery,placeholder:'e.g. "Solidity DeFi developer" or "Rust L2 engineer"...',onInput:e=>setStateQuiet({aiQuery:e.target.value})});
    aiq.addEventListener("keydown",e=>{ if(e.key==="Enter") aiSearch(); });
    const ti2 = el("input",{type:"password",value:state.tokenInput,placeholder:"ghp_xxxxxxxxxxxx",onInput:e=>setStateQuiet({tokenInput:e.target.value})});
    const presetDiv = el("div",{className:"presets"});
    Object.keys(KB).slice(0,8).forEach(role => {
      presetDiv.appendChild(el("button",{className:"preset",onClick:()=>{
        setState({aiQuery:role});
        const data=KB[role];
        setState({aiSuggs:data.repos.slice(0,4).map(repo=>({repo,reason:data.reason,tags:data.tags}))});
      }},role));
    });
    const suggDiv = state.aiSuggs.length>0 ? el("div",{className:"ai-sugg"},
      el("div",{className:"ai-sugg-title"},"// Recommended repositories ("+state.aiSuggs.length+")"),
      el("div",{className:"sgrid"},
        ...state.aiSuggs.map(s=>el("div",{className:"scard",onClick:()=>{ setState({repoInput:s.repo,mode:"repo"}); setTimeout(fetchRepo,80); }},
          el("div",{className:"srepo"},s.repo),
          el("div",{className:"sreason"},s.reason),
          el("div",{className:"stags"},...s.tags.map(t=>el("span",{className:"bdg bdg-lang"},t)))
        ))
      )
    ) : null;
    searchCard = el("div",{className:"card"},
      el("div",{className:"flabel"},"// Describe the developer you're looking for"),
      el("div",{className:"irow"},aiq,el("button",{className:"abtn",onClick:aiSearch},"Find Repos â†’")),
      el("div",{className:"flabel",style:{marginTop:"14px",marginBottom:"8px"}},"// Quick role presets"),
      presetDiv,
      suggDiv,
      el("div",{className:"trow"},
        el("div",{className:"flabel"},"// GitHub Token"),
        ti2,
        el("p",{className:"tnote"},"Never stored. ",el("a",{href:"https://github.com/settings/tokens/new?scopes=read:user&description=RepoRecruit",target:"_blank"},"Generate one â†’"))
      )
    );
  }

  // ERROR
  const errDiv = state.error ? el("div",{className:"erbox"},"âš  "+state.error) : null;

  // LOADER
  const loaderDiv = state.loading ? el("div",{className:"loader"},
    el("div",{className:"lbar"},el("div",{className:"lfill"})),
    el("p",{className:"ltext"},state.loadingText),
    state.loadingSub ? el("p",{className:"lsub"},state.loadingSub) : null
  ) : null;

  // RESULTS
  let resultsDiv = null;
  if (state.contributors.length>0&&!state.loading) {
    const repoBanner = state.repoInfo ? el("div",{className:"rbanner"},
      el("div",{},
        el("div",{className:"flabel"},"// Repository"),
        el("div",{className:"rtitle"},state.repoInfo.full_name),
        state.repoInfo.description?el("div",{className:"rdesc"},state.repoInfo.description):null
      ),
      el("div",{className:"rstat"},"â­ "+(state.repoInfo.stargazers_count||0).toLocaleString()),
      el("div",{className:"rstat"},"ðŸ´ "+(state.repoInfo.forks_count||0).toLocaleString()),
      state.repoInfo.language?el("div",{className:"rstat"},"{ } "+state.repoInfo.language):null,
      el("a",{className:"libtn",style:{fontSize:"11px",padding:"6px 14px"},href:state.repoInfo.html_url,target:"_blank"},"GitHub â†—")
    ) : null;

    const statsBar = el("div",{className:"sbar"},
      el("div",{className:"stat"},el("div",{className:"snum",style:{color:"var(--t)"}},state.contributors.length),el("div",{className:"slabel"},"Contributors")),
      el("div",{className:"stat"},el("div",{className:"snum",style:{color:"var(--a)"}},withEmail),el("div",{className:"slabel"},"Public Emails")),
      el("div",{className:"stat"},el("div",{className:"snum",style:{color:"var(--a2)"}},activeDevs),el("div",{className:"slabel"},"Active 90d")),
      el("div",{className:"stat"},el("div",{className:"snum",style:{color:"var(--pur)"}},web3Devs),el("div",{className:"slabel"},"Web3 Signals")),
      el("div",{className:"stat"},el("div",{className:"snum",style:{color:"var(--a3)"}},savedCount),el("div",{className:"slabel"},"Saved"))
    );

    const sf = el("input",{type:"text",className:"sfilter",value:state.textFilter,placeholder:"Filter by name, location...",onInput:e=>{
  setStateQuiet({textFilter:e.target.value});
  const pos=e.target.selectionStart;
  render();
  const el2=document.querySelector(".sfilter");
  if(el2){el2.focus();try{el2.setSelectionRange(pos,pos);}catch(x){}}
}});
    const rhead = el("div",{className:"rheader"},
      el("div",{className:"rmeta"},el("h2",{className:"rtitle2"},"Contributors"),el("span",{className:"cpill"},filtered.length)),
      el("div",{className:"bgroup"},sf,
        el("button",{className:"obtn",onClick:()=>{
          const rows=[["Name","Handle","GitHub URL","Email","Location","Company","Commits","Score","Badges","LinkedIn"],
            ...filtered.map(c=>[c.name||c.login,"@"+c.login,c.html_url,c.email||"",c.location||"",c.company||"",c.contributions,calcScore(c),c.badges.map(b=>b.label).join(", "),liUrl(c)]).map(r=>r.map(v=>'"'+String(v).replace(/"/g,'""')+'"').join(","))];
          dlFile("repocruit-export.csv",rows.join("\n"),"text/csv");
        }},"Export CSV")
      )
    );

    const fbar = el("div",{className:"fbar"},
      ...[["all","All"],["email","Has Email"],["active","Active 90d"],["saved","Saved"]].map(([v,l])=>
        el("button",{className:"fbtn"+(state.filter===v?" on":""),onClick:()=>setState({filter:v})},l)
      ),
      allLangs.length>0?el("div",{className:"fsep"}):null,
      ...allLangs.map(lang=>el("button",{className:"lfbtn"+(state.langFilter===lang?" on":""),onClick:()=>setState({langFilter:state.langFilter===lang?"all":lang})},lang))
    );

    const tbody = el("tbody",{});
    filtered.forEach(c => {
      const score=calcScore(c), act=actInfo(c), sv=!!state.saved[c.login];
      const tr=el("tr",{},
        el("td",{},el("div",{className:"avcell"},
          el("img",{className:"av",src:c.avatar_url,alt:c.login,loading:"lazy",onClick:()=>openProfile(c)}),
          el("div",{},
            el("div",{className:"ntext",onClick:()=>openProfile(c)},c.name||c.login),
            c.company?el("div",{className:"stext"},c.company):null,
            state.notes[c.login]?el("div",{className:"stext",style:{color:"var(--a3)"}},"ðŸ“ "+state.notes[c.login].slice(0,28)+(state.notes[c.login].length>28?"...":"")):null
          )
        )),
        el("td",{},el("a",{className:"hlink",href:c.html_url,target:"_blank"},"@"+c.login)),
        el("td",{},el("div",{className:"bdgcell"},...(c.badges.length?c.badges.slice(0,4).map(bdg):[el("span",{className:"noval"},"â€”")]))),
        el("td",{},el("div",{className:"score-wrap"},
          el("div",{className:"score-row"},
            el("span",{className:"score-n",style:{color:scoreColor(score)}},score),
            el("div",{className:"score-bar"},el("div",{className:"score-fill",style:{width:score+"%",background:scoreColor(score)}}))
          ),
          el("div",{className:"score-lbl"},score>=70?"High":score>=40?"Mid":"Low")
        )),
        el("td",{},el("span",{className:"adot "+act.cls}),el("span",{className:"atext",style:{color:act.col}},act.txt)),
        el("td",{},c.email?el("a",{className:"elink",href:"mailto:"+c.email},c.email):el("span",{className:"noval"},"â€”")),
        el("td",{},el("span",{style:{fontSize:"11px",color:"var(--t2)"}},c.location||el("span",{className:"noval"},"â€”"))),
        el("td",{},el("a",{className:"libtn",href:liUrl(c),target:"_blank"},"Search â†—")),
        el("td",{},el("button",{className:"svbtn"+(sv?" on":""),onClick:()=>{
          const s={...state.saved};
          if(s[c.login])delete s[c.login]; else s[c.login]={login:c.login,name:c.name,avatar_url:c.avatar_url,html_url:c.html_url};
          setState({saved:s});
        }},sv?"â˜…":"â˜†"))
      );
      tbody.appendChild(tr);
    });

    const table = el("div",{className:"twrap"},el("table",{},
      el("thead",{},el("tr",{},
        ...["Contributor","Handle","Web3 Signals","Score","Activity","Email","Location","LinkedIn","Save"].map(h=>el("th",{},h))
      )),
      tbody
    ));

    resultsDiv = el("div",{},repoBanner,statsBar,rhead,fbar,table);
  }

  // PROFILE DRAWER
  let profileDrawer = null;
  if (state.profileOpen) {
    const c = state.profileOpen;
    const score = calcScore(c);
    const act = actInfo(c);
    const pRepos = state.profileRepos[c.login]||[];

    const toneRow = el("div",{className:"tone-row"},
      ...[["direct","Direct"],["brief","Brief"],["story","Story-led"]].map(([v,l])=>
        el("button",{className:"tbtn"+(state.outreachTone===v?" on":""),onClick:()=>setState({outreachTone:v})},l)
      ),
      el("button",{className:"genbtn",onClick:()=>{
        const msg=generateOutreach(c,state.outreachTone,state.repoInfo);
        setState({outreachMsg:msg,outreachCopied:false});
      }},"Generate âœ¦")
    );

    const msgArea = state.outreachMsg ? el("div",{className:"omsg-wrap"},
      el("textarea",{className:"omsg",readOnly:true,value:state.outreachMsg}),
      el("button",{className:"copybtn"+(state.outreachCopied?" done":""),onClick:copyOutreach},state.outreachCopied?"âœ“ Copied!":"Copy"),
      el("p",{className:"onote"},"Personalised using "+(c.name||c.login)+"'s web3 signals, commit count & activity. Replace [Your name] before sending.")
    ) : null;

    const repoCds = pRepos.length ? el("div",{className:"rcards"},
      ...pRepos.slice(0,6).map(r=>el("a",{className:"rcard",href:r.html_url,target:"_blank"},
        el("div",{className:"rcard-name"},r.name),
        el("div",{className:"rcard-desc"},r.description||"No description"),
        el("div",{className:"rcard-meta"},"â­ "+r.stargazers_count,r.language?" Â· "+r.language:"")
      ))
    ) : el("p",{style:{fontSize:"11px",color:"var(--t3)"}},"Loading repos...");

    profileDrawer = el("div",{className:"overlay",onClick:e=>{ if(e.target===e.currentTarget)setState({profileOpen:null}); }},
      el("div",{className:"drawer"},
        el("div",{className:"dhead"},el("div",{className:"dtitle"},"Profile"),el("button",{className:"cbtn",onClick:()=>setState({profileOpen:null})},"âœ•")),
        el("div",{className:"ptop"},
          el("img",{className:"pav",src:c.avatar_url,alt:c.login}),
          el("div",{},
            el("div",{className:"pname"},c.name||c.login),
            el("div",{className:"phandle"},el("a",{className:"hlink",href:c.html_url,target:"_blank"},"@"+c.login)),
            c.bio?el("div",{className:"pbio"},c.bio):null,
            el("div",{className:"pmeta"},
              c.location?el("span",{className:"pmi"},"ðŸ“ "+c.location):null,
              c.company?el("span",{className:"pmi"},"ðŸ¢ "+c.company):null,
              c.email?el("span",{className:"pmi"},"âœ‰ "+c.email):null,
              el("span",{className:"pmi"},"ðŸ“¦ "+(c.publicRepos||0)+" repos"),
              el("span",{className:"pmi"},"âš¡ "+(c.contributions||0).toLocaleString()+" commits")
            )
          )
        ),
        c.badges&&c.badges.length?el("div",{className:"psec"},el("div",{className:"psect"},"Web3 Signals"),el("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"}},...c.badges.map(b=>el("span",{className:"bdg "+b.cls,style:{fontSize:"11px",padding:"5px 10px"}},b.label)))):null,
        el("div",{className:"psec"},
          el("div",{className:"psect"},"Activity Score"),
          el("div",{style:{display:"flex",alignItems:"center",gap:"16px"}},
            el("span",{style:{fontFamily:"'DM Serif Display',serif",fontSize:"46px",color:scoreColor(score)}},score),
            el("div",{},
              el("div",{style:{fontSize:"11px",color:"var(--t2)",marginBottom:"6px"}},"Based on recency, commit volume & repo diversity"),
              el("div",{style:{display:"flex",gap:"10px",fontSize:"10px",color:"var(--t3)"}},
                el("span",{},"âš¡ "+(c.contributions||0)+" commits to this repo"),
                c.daysSince?el("span",{},"ðŸ• Last active "+Math.round(c.daysSince)+"d ago"):null
              )
            )
          )
        ),
        el("div",{className:"psec"},el("div",{className:"psect"},"Top Repositories"),repoCds),
        el("div",{className:"psec"},
          el("div",{className:"psect"},"âœ¦ Chainlink Labs Outreach Message"),
          toneRow,
          msgArea
        ),
        el("div",{className:"psec"},
          el("div",{className:"psect"},"Recruiter Notes"),
          el("textarea",{className:"narea",placeholder:"Interview stage, fit assessment, follow-up date...",value:state.noteText,onInput:e=>setStateQuiet({noteText:e.target.value})}),
          el("button",{className:"nsave",onClick:()=>setState({notes:{...state.notes,[c.login]:state.noteText}})},"Save Note")
        ),
        el("div",{style:{display:"flex",gap:"10px",marginTop:"4px",flexWrap:"wrap"}},
          el("a",{className:"libtn",style:{fontSize:"11px",padding:"8px 15px"},href:liUrl(c),target:"_blank"},"Search LinkedIn â†—"),
          el("a",{className:"libtn",style:{fontSize:"11px",padding:"8px 15px"},href:c.html_url,target:"_blank"},"GitHub Profile â†—"),
          el("button",{className:"svbtn"+(state.saved[c.login]?" on":""),style:{fontSize:"15px",padding:"6px 14px"},onClick:()=>{
            const s={...state.saved};
            if(s[c.login])delete s[c.login]; else s[c.login]={login:c.login,name:c.name,avatar_url:c.avatar_url,html_url:c.html_url};
            setState({saved:s});
          }},state.saved[c.login]?"â˜… Saved":"â˜† Save")
        )
      )
    );
  }

  // SAVED DRAWER
  let savedDrawer = null;
  if (state.showSaved) {
    const svList = Object.values(state.saved);
    savedDrawer = el("div",{className:"overlay",onClick:e=>{ if(e.target===e.currentTarget)setState({showSaved:false}); }},
      el("div",{className:"drawer"},
        el("div",{className:"dhead"},el("div",{className:"dtitle"},"Saved Candidates ("+svList.length+")"),el("button",{className:"cbtn",onClick:()=>setState({showSaved:false})},"âœ•")),
        svList.length===0 ? el("div",{className:"empty"},"No saved candidates yet.",el("br",{}),"Click â˜† on any row to save.") :
        el("div",{className:"spanel"},
          ...svList.map(c=>el("div",{className:"svc"},
            el("img",{className:"av",src:c.avatar_url,alt:c.login,style:{width:"38px",height:"38px",cursor:"default"}}),
            el("div",{className:"svc-info"},
              el("div",{className:"svc-name"},c.name||c.login),
              el("a",{className:"svc-handle hlink",href:c.html_url,target:"_blank"},"@"+c.login),
              state.notes[c.login]?el("div",{className:"svc-note"},"ðŸ“ "+state.notes[c.login]):null
            ),
            el("button",{className:"unsave",onClick:()=>{
              const s={...state.saved};delete s[c.login];setState({saved:s});
            }},"âœ•")
          ))
        )
      )
    );
  }

  const footer = el("footer",{},el("div",{className:"wrap"},"RepoRecruit â€” Web3 Talent Intelligence Â· GitHub API Â· Built for Chainlink Labs recruiting"));

  const main = el("div",{className:"wrap"},hero,modeToggle,searchCard,errDiv,loaderDiv,resultsDiv);
  app.appendChild(header);
  app.appendChild(main);
  app.appendChild(footer);
  if (profileDrawer) app.appendChild(profileDrawer);
  if (savedDrawer) app.appendChild(savedDrawer);
}

render();
</script>
</body>
</html>
